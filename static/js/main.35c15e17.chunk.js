(this["webpackJsonp@bebomining/client-web"]=this["webpackJsonp@bebomining/client-web"]||[]).push([[0],{142:function(e,t,n){},192:function(e,t,n){},242:function(e,t,n){"use strict";n.r(t);var a=n(17),r=n.n(a),o=n(6),c=n(0),i=n.n(c),s=i.a.createContext(),l=i.a.createContext(),u=n(66),d=n(67),j=n(71),p=n(70),b=n(9),m=n(22),f=n(21),x=n(143),v=n(32),O=n(289),h=n(19),g=n.n(h),N=n(300),w=n(302),y=n(303),C=n(304),k=n(11),S=n.n(k),I=n(18),W=n(297),T=n(299),P=n(298),R=n(97),E=n.n(R),D=n(150),B=n.n(D),A=n(151),M=n.n(A),_=n(103),F=n(96),z=n.n(F),L=n(147),U=n.n(L),G=n(148),V=n.n(G),q=n(1),H=!0,Y=!1,K={true:"Run",false:"Stop"};function X(e){var t=e.innerRef,n=e.onPlay,a=e.onStop,r=e.className,i=e.forceDisabled,s=e.initialStatus,l=void 0===s?H:s,u=Object(c.useState)((function(){return l})),d=Object(o.a)(u,2),j=d[0],p=d[1],b=Object(c.useRef)(j),m=Object(c.useState)((function(){return K[j]})),f=Object(o.a)(m,2),x=f[0],v=f[1],h=Object(c.useState)((function(){return!1})),g=Object(o.a)(h,2),N=g[0],w=g[1];Object(c.useImperativeHandle)(t,(function(){return{forceShowPlayBtn:function(){w(!0),b.current=H,p(H),setTimeout((function(){v(K[H]),w(!1)}),100)}}})),Object(c.useEffect)((function(){b.current===H&&j===Y?(w(!0),null===n||void 0===n||n().then((function(){v(K[Y]),b.current=j})).catch((function(){return p(H)})).finally((function(){return w(!1)}))):b.current===Y&&j===H&&(w(!0),null===a||void 0===a||a().then((function(){v(K[H]),b.current=j})).catch((function(){return p(Y)})).finally((function(){return w(!1)})))}),[j]);var y=x===K[H],C=y?K[H]:K[Y],k=y?"default":"secondary";return Object(q.jsx)(O.a,{className:r,size:"small",disabled:N||i,color:k,"aria-label":x,title:x,startIcon:y?Object(q.jsx)(U.a,{}):Object(q.jsx)(V.a,{}),onClick:function(){return p((function(e){return!e}))},children:C})}function J(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.method=n.method||"GET",n.headers=n.headers||{},(null===(t=n.headers)||void 0===t?void 0:t["Content-Type"])||(null===n||void 0===n?void 0:n.body)instanceof FormData||(n.headers["Content-Type"]="application/json");var a=Date.now();return window._SOCKET.send({namespace:e,opts:n,id:a}),new Promise((function(t,n){window._BUS.on("".concat(e,"-").concat(a),(function r(o){window._BUS.off("".concat(e,"-").concat(a),r),console.log("FETCH END => ","".concat(e,"-").concat(a),o),o.err?n(o.err):t(o)}))}))}function $(e){return Z.apply(this,arguments)}function Z(){return Z=Object(I.a)(S.a.mark((function e(t){var n,a,r,c,i,s=arguments;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:5600,a=new Promise((function(e){return setTimeout(e,n)})),e.next=4,Promise.all([t,a]);case 4:return r=e.sent,c=Object(o.a)(r,1),i=c[0],console.log("result => ",i),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}var Q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n="1e".concat(t),a=(Math.round(e*n)/n).toFixed(t);return 0===e?0:a};function ee(){return Object(c.useContext)(s)}var te=n(322),ne=n(296),ae=n(294),re=n(295),oe=n(293),ce=function(){return null};function ie(e){var t=e.title,n=void 0===t?"Do you confirm the operation?":t,a=e.content,r=e.onConfirm,o=void 0===r?ce:r,c=e.onCancel,i=void 0===c?ce:c;return Object(q.jsxs)(te.a,{open:!0,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(q.jsx)(oe.a,{id:"alert-dialog-title",children:n}),Object(q.jsx)(ae.a,{children:Object(q.jsx)(re.a,{id:"alert-dialog-description",children:a})}),Object(q.jsxs)(ne.a,{children:[Object(q.jsx)(O.a,{onClick:i,children:"Cancel"}),Object(q.jsx)(O.a,{onClick:o,color:"primary",autoFocus:!0,children:"Confirm"})]})]})}var se,le="WITH_ACTION_PROGRESS",ue=le,de=function(){return null};function je(e){var t=e.workerName,n=e.coinName,a=e.minerMode,r=e.minerName,i=e.poolName,s=e.walletName,l=e.algo,u=e.id,d=e.onAction,j=void 0===d?de:d,p=e.isRunning,b=void 0!==p&&p,f=e.onRemoveWorker,x=pe(),v=ee(),h=v.bus,g=v.winStatus,N=Object(m.f)(),w=Object(m.i)(),y=Object(c.useState)((function(){return b})),C=Object(o.a)(y,2),k=C[0],R=C[1],D=Object(c.useState)((function(){return!1})),A=Object(o.a)(D,2),F=A[0],L=A[1],U=Object(c.useState)((function(){return!1})),G=Object(o.a)(U,2),V=G[0],H=G[1],Y=function(){var e=Object(I.a)(S.a.mark((function e(){var n,a,r,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),j(!0),e.prev=2,h.emit("ON_PLAY_WORKER_START"),n="workers/".concat(u,"/_start"),a=$(J(n,{method:"POST"})),r="Starting ".concat(t,"..."),h.emit(ue,{promise:a,label:r}),e.next=10,a;case 10:o=e.sent,R(!0),h.emit("ON_PLAY_WORKER_END_SUCCESS"),console.log("onPlay ",o);case 14:return e.prev=14,h.emit("ON_PLAY_WORKER_END_ERROR"),L(!1),j(!1),e.finish(14);case 19:case"end":return e.stop()}}),e,null,[[2,,14,19]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(I.a)(S.a.mark((function e(){var n,a,r,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!1),L(!0),j(!0),e.prev=3,h.emit("ON_STOP_WORKER_START"),n="workers/".concat(u,"/_stop"),a=$(J(n,{method:"POST"})),r="Stopping ".concat(t,"..."),h.emit(ue,{promise:a,label:r}),e.next=11,a;case 11:o=e.sent,R(!1),ce(null),h.emit("ON_STOP_WORKER_END_SUCCESS"),console.log("onStop ",o);case 16:return e.prev=16,h.emit("ON_STOP_WORKER_END_ERROR"),L(!1),j(!1),e.finish(16);case 21:case"end":return e.stop()}}),e,null,[[3,,16,21]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){return H((function(e){return!e}))},te=function(){var e=Object(I.a)(S.a.mark((function e(){var n,a,r,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),Z(),e.prev=2,n="workers/".concat(u),a=$(J(n,{method:"DELETE"})),r="Deleting Worker: '".concat(t,"'..."),h.emit(ue,{promise:a,label:r}),e.next=9,a;case 9:o=e.sent,f({workerId:u}),console.log("onDelete Worker",o),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.error(e.t0);case 17:return e.prev=17,L(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})));return function(){return e.apply(this,arguments)}}(),ne=Object(c.useRef)(null),ae=Object(c.useState)((function(){return null})),re=Object(o.a)(ae,2),oe=re[0],ce=re[1],se=Object(c.useRef)(),le=Object(c.useRef)(!1),je=Object(c.useRef)({status:k,winStatus:g});je.current.status=k,je.current.winStatus=g,Object(c.useEffect)((function(){if(le.current=!0,null===ne.current){var e=function(){var e=Object(I.a)(S.a.mark((function e(){var n,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!le.current||!je.current.status||"restore"!==je.current.winStatus){e.next=14;break}return e.prev=1,e.next=4,J(t);case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,le.current&&ce(a.results),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),le.current&&(R(!1),ce(null),se.current.forceShowPlayBtn());case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),t="workers/".concat(u,"/_stats");e(),ne.current=setInterval(e,5e3)}return function(){le.current=!1,clearInterval(ne.current)}}),[]);var be=t.length>=30?"".concat(t.substring(0,30),"..."):t,me=k?"Check ".concat(be," Stats"):void 0,fe=k?"primary":"inherit",xe=(null===oe||void 0===oe?void 0:oe.session)||{},ve=xe.performance,Oe=xe.performanceUnit;return Object(q.jsxs)("div",{"data-id":u,className:x.CardWrapper,children:[Object(q.jsxs)(W.a,{title:me,className:x.root,variant:"outlined","data-running":k,children:[void 0!==ve&&Object(q.jsxs)("div",{className:x.Performance,children:[Q(ve)," ",Oe]}),Object(q.jsxs)(P.a,{children:[Object(q.jsx)(_.a,{title:"Name: ".concat(t),className:x.title,color:"textSecondary",gutterBottom:!0,children:Object(q.jsxs)("span",{className:x.WrapperStatsIcon,children:[Object(q.jsx)("span",{style:{maxWidth:"180px"},className:"text-ellipsis",children:t}),Object(q.jsx)(B.a,{color:fe})]})}),Object(q.jsxs)(_.a,{variant:"h5",component:"h2",className:x.textPrimary,children:["COIN: ",n]}),Object(q.jsx)(_.a,{className:x.textSecondary,color:"textSecondary",children:Object(q.jsxs)("span",{className:"text-ellipsis",children:[i," - ",l," - ",r," - ",a]})}),Object(q.jsxs)(_.a,{variant:"body2",component:"p",className:x.WalletInfo,children:[Object(q.jsx)(z.a,{}),Object(q.jsx)("span",{title:"Wallet Name: ".concat(s),className:"text-ellipsis",children:s})]})]}),Object(q.jsxs)(T.a,{className:x.CardActions,children:[Object(q.jsx)(O.a,{className:x.buttons,size:"small",disabled:F||k,"aria-label":"remove",title:"remove",onClick:Z,startIcon:Object(q.jsx)(E.a,{}),children:"Remove"}),Object(q.jsx)(O.a,{className:x.buttons,size:"small",disabled:F||k,"aria-label":"edit",title:"edit",onClick:function(){var e=w.params.rigId;N.push("/rigs/".concat(e,"/workers/edit/").concat(u))},startIcon:Object(q.jsx)(M.a,{}),children:"Edit"}),Object(q.jsx)(X,{innerRef:se,className:x.buttons,forceDisabled:F,initialStatus:!k,onStop:K,onPlay:Y})]}),Object(q.jsx)("div",{className:x.buttonCover,onClick:function(){var e=w.params.rigId;k&&N.push("/rigs/".concat(e,"/workers/stats/").concat(u))}})]}),V&&Object(q.jsx)(ie,{content:"You will be removing the worker: '".concat(t,"'!"),onCancel:Z,onConfirm:te})]})}var pe=Object(N.a)({root:{position:"relative",width:"100%",textAlign:"left","&:hover[data-running='true'], &:focus[data-running='true']":{cursor:"pointer",boxShadow:"0px 10px 13px -7px #e0e0e0",border:"1px solid #3f51b5"}},Performance:{backgroundColor:"#439c43",padding:"2px 4px",position:"absolute",left:"50%",transform:"translateX(-50%)",borderBottomRightRadius:"4px",borderBottomLeftRadius:"4px",fontSize:"12px",color:"white",fontWeight:"bolder"},WrapperStatsIcon:{display:"flex",alignItems:"center",justifyContent:"space-between"},buttonCover:{width:"100%",position:"absolute",height:"100%",top:0,left:0,zIndex:1},buttons:{zIndex:2,position:"relative"},title:{fontSize:14},textSecondary:{marginBottom:12,textTransform:"lowercase"},textPrimary:{textTransform:"uppercase"},CardWrapper:(se={width:"33.33%",padding:"4px"},Object(v.a)(se,"@media (max-width:900px)",{width:"50%"}),Object(v.a)(se,"@media (max-width:624px)",{width:"100%"}),se),WalletInfo:{display:"flex",alignItems:"center","& span":{marginLeft:"4px"}},CardActions:{justifyContent:"space-between"}}),be=Object(N.a)({NoWorkers:{flexDirection:"column",alignItems:"center",display:"flex",justifyContent:"center",textAlign:"center",height:"100%"},button:{marginTop:"32px"},textSecondary:{marginTop:"24px"}});function me(){var e=be(),t=Object(m.f)(),n=Object(m.i)();return Object(q.jsxs)("div",{className:e.NoWorkers,children:[Object(q.jsx)(_.a,{variant:"h4",children:"No Workers!"}),Object(q.jsx)(O.a,{variant:"contained",size:"large",color:"primary",className:e.button,startIcon:Object(q.jsx)(g.a,{}),onClick:function(){return t.push("".concat(n.url,"/add-worker"))},children:"Add New Worker"}),Object(q.jsx)(_.a,{className:e.textSecondary,color:"textSecondary",children:"You do not have any worker yet! Please add a worker and start mining!"})]})}var fe=Object(N.a)({NoWorkers:{flex:1,flexDirection:"column",alignItems:"center",display:"flex",justifyContent:"center"},button:{marginTop:"32px"},textSecondary:{marginTop:"24px"}});function xe(){var e=fe();return Object(q.jsxs)("div",{className:e.NoWorkers,children:[Object(q.jsx)(_.a,{variant:"h4",children:"No running Workers!"}),Object(q.jsx)(_.a,{className:e.textSecondary,color:"textSecondary",children:"None of your workers is running at the moment!"})]})}function ve(e,t){var n=Object(c.useState)(null),a=Object(o.a)(n,2),r=a[0],i=a[1],s=Object(c.useState)(null),l=Object(o.a)(s,2),u=l[0],d=l[1],j=Object(c.useState)(null),p=Object(o.a)(j,2),b=p[0],m=p[1],f=Object(c.useRef)(!1),x=Object(c.useRef)((function(){return r}));return Object(c.useEffect)((function(){return function(){f.current=!0}}),[]),Object(c.useEffect)((function(){d(!0),i(null),m(null),J(e,t).then((function(e){f.current||(x.current=e,i(e),d(!1))})).catch((function(e){f.current||(m(e),d(!1))}))}),[e]),{data:r,loading:u,error:b,updateData:i,prevData:x.current}}var Oe=n(82),he=n(318),ge=n(301);function Ne(e){var t=e.severity,n=void 0===t?"error":t,a=e.message,r=e.title,o=e.children,i=e.identifier,s=Object(c.useContext)(l),u=Object(c.useCallback)((function(){s((function(e){var t=e.list.filter((function(e){return i!==e.props.identifier}));return Object(b.a)(Object(b.a)({},e),{},{list:t})}))}),[]);return Object(q.jsxs)(he.a,{onClose:function(){return u()},style:{margin:"4px 0",alignItems:"center"},severity:n,children:[r&&Object(q.jsx)(ge.a,{children:r}),a&&a,o]})}function we(e){var t=Object(c.useContext)(l),n=Object(c.useCallback)((function(e){var n=Date.now()+Math.floor(1e8*Math.random()),a=i.a.cloneElement(e,{identifier:n});t((function(e){return{list:[].concat(Object(Oe.a)(e.list),[a])}}))}),[]),a=function(e){return n(Object(q.jsx)(Ne,{severity:"error",message:e.message}))};return Object(c.useEffect)((function(){e&&a(e)}),[e]),{addError:a}}function ye(){var e,t=Ce(),n=Object(m.f)(),a=Object(m.i)(),r=Object(c.useState)({onlyRunning:!1}),i=Object(o.a)(r,2),s=i[0],l=i[1],u=Object(c.useState)((function(){return!1})),d=Object(o.a)(u,2),j=d[0],p=d[1],f=ve("workers?onlyRunning=".concat(s.onlyRunning)),x=f.loading,h=f.data,N=f.error,k=f.updateData,S=f.prevData;if(we(N),x||null===x)return Object(q.jsx)("div",{className:t.loadingBar,children:Object(q.jsx)(w.a,{size:50})});var I=function(e){var t=e.workerId;k((function(e){return Object(b.a)(Object(b.a)({},e),{},{results:e.results.filter((function(e){var n=e.id;return Number(n)!==Number(t)}))})}))},W=function(e){p(e)},T=h.results,P=s.onlyRunning&&(null===T||void 0===T?void 0:T.length)<=0&&(null===S||void 0===S||null===(e=S.results)||void 0===e?void 0:e.length)>=0,R=!s.onlyRunning&&(null===T||void 0===T?void 0:T.length)<=0;return R?Object(q.jsx)(me,{}):Object(q.jsxs)("div",{className:t.Workers,children:[Object(q.jsxs)("div",{className:t.NavBar,children:[Object(q.jsx)(O.a,{variant:"contained",size:"small",color:"primary",className:t.button,startIcon:Object(q.jsx)(g.a,{}),onClick:function(){var e=a.params.rigId;n.push("/rigs/".concat(e,"/workers/add"))},children:"Add Worker"}),!R&&Object(q.jsx)("div",{children:Object(q.jsx)(y.a,{control:Object(q.jsx)(C.a,{disabled:j,checked:s.onlyRunning,onChange:function(e){l(Object(b.a)(Object(b.a)({},s),{},Object(v.a)({},e.target.name,e.target.checked)))},name:"onlyRunning",color:"secondary"}),label:"Show only running"})})]}),P?Object(q.jsx)(xe,{}):Object(q.jsx)("div",{className:t.Grid_Box,children:Object(q.jsx)("div",{id:"Grid_Workers",className:t.Grid,children:T.map((function(e){return Object(q.jsx)(je,Object(b.a)({onAction:W,onRemoveWorker:I,isRunning:"number"===typeof e.pid},e),e.workerName)}))})})]})}var Ce=Object(N.a)((function(){return{Workers:{width:"100%",height:"100%",flex:"1",display:"flex",flexDirection:"column",overflow:"hidden",position:"relative"},Grid_Box:{width:"100%",overflow:"auto"},Grid:{display:"flex",width:"100%",margin:"auto",flexWrap:"wrap",padding:"6px"},NavBar:{width:"100%",display:"flex",padding:"16px 8px",justifyContent:"space-between"},loadingBar:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"}}})),ke=(n(192),n(27)),Se=n(8),Ie=n(51),We=n.n(Ie),Te=n(323),Pe=n(305),Re=n(321),Ee=function(){return null},De=function(e){var t=e.size,n=e.startIcon,a=e.onClick,r=void 0===a?Ee:a,o=e.children,c=Object(Se.g)(),i=c.isValid,s=c.formStatus,l=c.submitted,u=s===Se.e.ON_SUBMIT;return Object(q.jsx)(O.a,{disabled:!i||u||l>0,type:"submit",size:t,variant:"contained",color:"primary",onClick:r,startIcon:n,children:o})},Be=Object(N.a)((function(e){return{root:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},wrapper:{flex:1},wrapperContent:{width:"100%",height:"100%",justifyContent:"space-evenly",display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%"},backButton:{marginRight:e.spacing(4)},instructions:{padding:"0 16px",textAlign:"center",marginTop:e.spacing(1),marginBottom:e.spacing(1)},Stepper:{overflow:"auto"}}}));function Ae(e){var t=e.onChangeStep,n=e.activeStep,a=e.children,r=Be(),o=["Worker Name","Mining Mode","Config Pool","COIN","Wallet","Config Miner","Summary"],c=n===o.length-1?Object(q.jsx)(De,{type:"submit",variant:"contained",color:"primary",children:"Save"}):Object(q.jsx)(De,{variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),t(n+1)},children:"Next"});return Object(q.jsxs)("div",{className:r.root,children:[Object(q.jsx)(Te.a,{className:r.Stepper,activeStep:n,alternativeLabel:!0,children:o.map((function(e){return Object(q.jsx)(Pe.a,{children:Object(q.jsx)(Re.a,{children:e})},e)}))}),Object(q.jsx)("div",{className:r.wrapper,children:Object(q.jsxs)("div",{className:r.wrapperContent,children:[Object(q.jsx)(_.a,{variant:"h4",className:r.instructions,children:Me(n)}),Object(q.jsx)("div",{className:r.form,children:a}),Object(q.jsxs)("div",{children:[Object(q.jsx)(O.a,{disabled:0===n,onClick:function(e){e.preventDefault(),t(n-1)},className:r.backButton,children:"Back"}),c]})]})})]})}function Me(e){switch(e){case 0:return"Type the worker name";case 1:return"Mining mode: GPU or CPU?";case 2:return"Configure the pool you want to use";case 3:return"Select the coin you want to mine";case 4:return"Select the wallet you want to use";case 5:return"Config the miner software you want to use";case 6:return"Worker Settings";default:return"Unknown stepIndex"}}var _e=n(316);function Fe(e){var t=e.name,n=e.touched,a=void 0===n||n,r=e.autoFocus,c=void 0!==r&&r,i=e.validators,s=e.label,l=e.variant,u=e.inputProps,d=Object(Se.i)(i),j=Object(o.a)(d,2),p=j[0],m=j[1],f=Object(Se.f)(Object(b.a)({type:"text",name:t,touched:a},m)),x=void 0!==p.error;return console.log("showError",x),Object(q.jsx)(_e.a,Object(b.a)({fullWidth:!0,autoFocus:c,label:s,variant:l,error:x,inputProps:u},f))}function ze(){return Object(q.jsx)("div",{style:{maxWidth:"624px",padding:"0 24px",margin:"auto"},children:Object(q.jsx)(Fe,{autoFocus:!0,touched:!0,helperText:"Accept letters, numbers and [#-_]...{2,50}",validators:[Le],label:"Type Worker Name...",variant:"outlined",name:"workerName"})})}var Le=function(e){return e&&/^[a-zA-Z][a-zA-Z0-9#\-_]{2,50}$/.test(e)?void 0:"Name not valid"},Ue=n(158),Ge=["onChangeValue","name","options","validators","matchValue","reduceValue","autoFocus","isMulti","isOptionDisabled"];function Ve(e){var t=e.onChangeValue,n=e.name,a=e.options,r=e.validators,i=e.matchValue,s=e.reduceValue,l=e.autoFocus,u=void 0===l||l,d=e.isMulti,j=void 0!==d&&d,p=e.isOptionDisabled,m=void 0===p?function(){return!1}:p,f=Object(ke.a)(e,Ge),x=Object(Se.i)(r),v=Object(o.a)(x,2)[1],O=Object(c.useRef)(),h=Object(Se.f)(Object(b.a)({type:"custom",name:n},v)),g=h.value,N=h.setValue,w="function"===typeof i?i(a,g):j?g:a.find((function(e){return e.value===g}));return Object(c.useEffect)((function(){u&&setTimeout((function(){return O.current&&O.current.focus()}),150)}),[u]),Object(q.jsx)(Ue.a,Object(b.a)({maxMenuHeight:150,ref:O,options:a,onChange:function(e){var n;n=j?e:e.value,"function"===typeof s&&(n=s(n)),N(n),null===t||void 0===t||t(n)},value:w,isMulti:j,isOptionDisabled:function(){return m(w)}},f))}function qe(e){var t=e.options,n=void 0===t?[]:t,a=e.onChangeValue,r=Object(c.useState)((function(){return n})),i=Object(o.a)(r,2),s=i[0],l=i[1],u=Object(Se.h)((function(e){return e.minerMode})),d=Object(o.a)(u,1)[0],j=ve("pools?algo=".concat(d)),p=j.loading,b=j.data;we(j.error),Object(c.useEffect)((function(){b&&200===b.statusCode&&l(b.results.map((function(e){var t=e.name;return{value:t,label:t}})))}),[b]);var m=p||null===p;return Object(q.jsx)(Ve,{placeholder:"Select a pool...",onChangeValue:a,isDisabled:m,isLoading:m,options:s,name:"poolName",validators:[He]})}var He=function(e){return"string"===typeof e?void 0:"required"},Ye=function(){return null};function Ke(e){var t=e.options,n=void 0===t?[]:t,a=e.onChangeValue,r=Object(Se.h)((function(e){return e.poolConfig.poolName})),i=Object(o.a)(r,1)[0],s=Object(Se.h)((function(e){return e.poolConfig.algo})),l=Object(o.a)(s,1)[0],u=Object(c.useState)((function(){return{}})),d=Object(o.a)(u,2),j=d[0],p=d[1],b=Object(c.useState)((function(){return n})),m=Object(o.a)(b,2),f=m[0],x=m[1],v=ve("pools/".concat(i,"/regions?algo=").concat(l.toLowerCase())),O=v.loading,h=v.data;we(v.error),Object(c.useEffect)((function(){h&&200===h.statusCode&&(p(h.meta),x(h.results.map((function(e){var t=e.location,n=e.server;return{value:"".concat(n).trim(),label:"".concat(n," - (").concat(t,")")}}))))}),[h]);var g=O||null===O,N=j.multiRegion;return Object(q.jsx)(Ve,{reduceValue:N?function(e){return e.map((function(e){return e.value.toLowerCase()})).sort().join(",")}:null,matchValue:N?function(e,t){return null===t||void 0===t?void 0:t.split(",").map((function(t){return e.find((function(e){var n=e.value;return t.toLowerCase()===n.toLowerCase()}))}))}:null,isMulti:N,placeholder:"Select the server region...",onChangeValue:N?Ye:a,isDisabled:g,isLoading:g,options:f,name:"poolRegion",validators:[Xe],isOptionDisabled:function(e){return N&&(null===e||void 0===e?void 0:e.length)>=2}})}var Xe=function(e){return"string"===typeof e?void 0:"required"};function Je(e){var t=e.options,n=void 0===t?[]:t,a=e.onChangeValue,r=Object(c.useState)((function(){return n})),i=Object(o.a)(r,2),s=i[0],l=i[1],u=Object(Se.h)((function(e){return e.poolConfig.poolName})),d=Object(o.a)(u,1)[0],j=Object(Se.h)((function(e){return e.minerMode})),p=Object(o.a)(j,1)[0],b=ve("pools/".concat(d,"/algos/").concat(p.toLowerCase())),m=b.loading,f=b.data;we(b.error),Object(c.useEffect)((function(){f&&200===f.statusCode&&l(f.results.map((function(e){return{value:e.value,label:e.label.toUpperCase()}})))}),[f]);var x=m||null===m;return Object(q.jsx)(Ve,{placeholder:"Select an algorithm...",isDisabled:x,isLoading:x,options:s,onChangeValue:a,name:"algo",validators:[$e]})}var $e=function(e){return"string"===typeof e?void 0:"required"};function Ze(e){var t=e.options,n=void 0===t?[]:t,a=e.onChangeValue,r=Object(Se.h)((function(e){return e.poolConfig.poolName})),i=Object(o.a)(r,1)[0],s=Object(Se.h)((function(e){return e.poolConfig.poolRegion})),l=Object(o.a)(s,1)[0],u=Object(c.useState)((function(){return n})),d=Object(o.a)(u,2),j=d[0],p=d[1],b=ve("pools/".concat(i,"/regions?serverName=").concat(l)),m=b.loading,f=b.data;we(b.error),Object(c.useEffect)((function(){if(f&&200===f.statusCode){var e=f.meta.ports,t=Object(o.a)(f.results,1)[0],n=(null===t||void 0===t?void 0:t.ports)||e,a={0:function(e){return"".concat(e," - (Suggested)")},1:function(e){return"".concat(e," - (Alternative)")},2:function(e){return"".concat(e," - (Alternative)")}},r=(null===n||void 0===n?void 0:n.length)>1;n&&p(n.map((function(e,t){return{value:e,label:r?a[t](e):e}})))}}),[f]);var x=m||null===m;return Object(q.jsx)(Ve,{placeholder:"Select the port...",onChangeValue:a,isDisabled:x,isLoading:x,options:j,name:"poolPort",validators:[Qe]})}var Qe=function(e){return"string"===typeof e?void 0:"required"};function et(e){var t=e.activeStep,n=e.children,a=e.evaluateNext,r=e.evaluatePrev,o=e.next,c=e.prev,i=tt(),s=Object(Se.g)().state,l=null===a||void 0===a?void 0:a(s,t),u=null===r||void 0===r?void 0:r(s,t);return Object(q.jsxs)("div",{className:i.root,children:[Object(q.jsx)("div",{className:i.children,children:n}),Object(q.jsxs)("div",{className:i.buttons,children:[Object(q.jsx)(O.a,{disabled:!u,size:"small",onClick:c,children:"Prev"}),Object(q.jsx)(O.a,{disabled:!l,size:"small",onClick:o,color:"primary",children:"Next"})]})]})}var tt=Object(N.a)((function(){return{root:{display:"flex",flex:1,flexDirection:"column"},children:{flex:1,marginTop:"24px"},buttons:{width:"35%",display:"flex",justifyContent:"space-evenly",marginTop:"16px",marginLeft:"auto",marginRight:"auto"}}}));function nt(){var e=["Name","Algorithm","Region","Port"],t=Object(c.useState)((function(){return 0})),n=Object(o.a)(t,2),a=n[0],r=n[1],i=at(),s=function(){return r((function(e){return++e}))},l=function(e){var t=e.currentTarget;t.classList.contains("MuiStep-completed")&&r(Number(t.dataset.index))};return Object(q.jsxs)("div",{children:[Object(q.jsx)("div",{style:{maxWidth:"624px",padding:"0 24px",margin:"auto"},children:Object(q.jsx)(Te.a,{className:i.Stepper,activeStep:a,children:e.map((function(e,t){return Object(q.jsx)(Pe.a,{"data-index":t,onClick:l,children:Object(q.jsx)(Re.a,{children:e})},e)}))})}),Object(q.jsx)(et,{activeStep:a,prev:function(){return r((function(e){return--e}))},next:s,evaluatePrev:ot,evaluateNext:rt,children:Object(q.jsx)(Se.a,{object:!0,name:"poolConfig",validators:[ct],children:Object(q.jsx)(Se.d,{children:Object(q.jsxs)("div",{style:{maxWidth:"624px",padding:"0 24px",margin:"auto"},children:[0===a&&Object(q.jsx)(qe,{onChangeValue:s},"0"),1===a&&Object(q.jsx)(Je,{onChangeValue:s},"1"),2===a&&Object(q.jsx)(Ke,{onChangeValue:s},"2"),3===a&&Object(q.jsx)(Ze,{},"3")]})})})})]})}var at=Object(N.a)((function(){return{Stepper:{paddingTop:0,overflow:"auto"}}}));function rt(e,t){var n,a,r,o,c,i;return 0===t&&(null===(n=e.poolConfig)||void 0===n?void 0:n.poolName)||1===t&&(null===(a=e.poolConfig)||void 0===a?void 0:a.poolName)&&(null===(r=e.poolConfig)||void 0===r?void 0:r.algo)||2===t&&(null===(o=e.poolConfig)||void 0===o?void 0:o.poolName)&&(null===(c=e.poolConfig)||void 0===c?void 0:c.algo)&&(null===(i=e.poolConfig)||void 0===i?void 0:i.poolRegion)}function ot(e,t){return t>0}function ct(e){return(null===e||void 0===e?void 0:e.poolName)&&(null===e||void 0===e?void 0:e.poolPort)&&(null===e||void 0===e?void 0:e.poolRegion)?void 0:"error"}function it(e){var t=e.options,n=void 0===t?[]:t,a=Object(c.useState)((function(){return n})),r=Object(o.a)(a,2),i=r[0],s=r[1],l=Object(Se.h)((function(e){return e.poolConfig.poolName})),u=Object(o.a)(l,1)[0],d=Object(Se.h)((function(e){return e.poolConfig.algo})),j=Object(o.a)(d,1)[0],p=ve("pools/".concat(u,"/coins?algo=").concat(j)),b=p.loading,m=p.data;we(p.error),Object(c.useEffect)((function(){m&&200===m.statusCode&&s(m.results.map((function(e){var t=e.symbol;return{value:t.toUpperCase(),label:t.toUpperCase()}})))}),[m]);var f=b||null===b;return Object(q.jsx)("div",{style:{maxWidth:"624px",padding:"0px 24px",margin:"auto"},children:Object(q.jsx)(Ve,{placeholder:"Select a coin...",isDisabled:f,isLoading:f,options:i,name:"coinName",validators:[st]})})}var st=function(e){return"string"===typeof e?void 0:"required"};function lt(e){var t=e.options,n=void 0===t?[]:t,a=e.onChangeValue,r=Object(c.useState)((function(){return n})),i=Object(o.a)(r,2),s=i[0],l=i[1],u=ve("wallets"),d=u.loading,j=u.data;we(u.error),Object(c.useEffect)((function(){j&&200===j.statusCode&&l(j.results.map((function(e){var t=e.walletName;return{value:t,label:t}})))}),[j]);var p=d||null===d;return Object(q.jsx)(Ve,{placeholder:"Pick a wallet...",onChangeValue:a,isDisabled:p,isLoading:p,options:s,name:"walletName",validators:[ut]})}var ut=function(e){return"string"===typeof e?void 0:"required"};function dt(e){var t=e.coinName,n=pt(),a=Object(Se.h)((function(e){return e.addNewCoinForm.walletName})),r=Object(o.a)(a,1)[0],c=t.split("+");return Object(q.jsx)(Se.a,{array:!0,name:"addresses",children:c.map((function(e,t){return Object(q.jsx)(Fe,{index:t,className:n.TextField,autoFocus:0===t,helperText:"Add a valid '".concat(e,"' Address - Wallet: '").concat(r,"'"),validators:[jt],label:"Type your '".concat(e,"' Address..."),variant:"outlined"},e)}))})}var jt=function(e){return"string"===typeof e&&e.trim().length>=5?void 0:"Address not valid"},pt=Object(N.a)((function(){return{TextField:{marginTop:"4px",marginBottom:"32px"}}})),bt=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={domElm:null},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this.state.domElm;return null===e?null:r.a.createPortal(this.props.children,e)}}],[{key:"getDerivedStateFromProps",value:function(e){return{domElm:document.querySelector(e.selector)}}}]),n}(i.a.PureComponent),mt=["addresses"];function ft(e){var t=e.coinName,n=e.toggleWalletForm,a=["Pick a Wallet","Coin Address"],r=xt(),i=ee().bus,s=Object(c.useState)(0),l=Object(o.a)(s,2),u=l[0],d=l[1],j=we().setError,p=Object(Se.g)().state;Object(c.useEffect)((function(){return function(){return console.log("useEffect unmounted")}}),[]);var m=function(e){var t,n;null===e||void 0===e||null===(t=e.preventDefault)||void 0===t||t.call(e),null===e||void 0===e||null===(n=e.stopPropagation)||void 0===n||n.call(e),u<a.length-1&&d(u+1)},f=function(){var e=Object(I.a)(S.a.mark((function e(a){var r,o,c,s,l,u;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===a||void 0===a||null===(r=a.preventDefault)||void 0===r||r.call(a),null===a||void 0===a||null===(o=a.stopPropagation)||void 0===o||o.call(a),e.prev=2,c=Object(b.a)(Object(b.a)({},p.addNewCoinForm),{},{coinName:t}),s=c.addresses,(l=Object(ke.a)(c,mt)).address=s.join("."),e.next=8,J("coins",{method:"POST",body:l});case 8:n(),i.emit("GO_NEXT"),e.next=18;break;case 12:return e.prev=12,e.t0=e.catch(2),console.log(e.t0),u="Error saving ".concat(t," address!"),j(new Error(u)),e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),x=u>=a.length-1,v=x?f:m,h=x&&Object(q.jsx)(g.a,{});return Object(q.jsx)(bt,{selector:"#FormWorkerPortal",children:Object(q.jsxs)("div",{className:r.FormWrapper,children:[Object(q.jsxs)(_.a,{variant:"h4",children:["Add ",Object(q.jsx)("b",{children:t})," into an existing wallet..."]}),Object(q.jsx)(Te.a,{className:r.Stepper,activeStep:u,alternativeLabel:!0,children:a.map((function(e){return Object(q.jsx)(Pe.a,{children:Object(q.jsx)(Re.a,{children:e})},e)}))}),Object(q.jsx)("div",{className:r.Form,children:Object(q.jsxs)(Se.a,{object:!0,name:"addNewCoinForm",children:[Object(q.jsxs)(Se.d,{children:[0===u&&Object(q.jsx)(lt,{onChangeValue:m},u),1===u&&Object(q.jsx)(dt,{coinName:t},u)]}),Object(q.jsxs)("div",{className:r.Buttons,children:[Object(q.jsx)(O.a,{disabled:0===u,onClick:function(e){var t,n;null===e||void 0===e||null===(t=e.preventDefault)||void 0===t||t.call(e),null===e||void 0===e||null===(n=e.stopPropagation)||void 0===n||n.call(e),u>=0&&d(u-1)},className:r.backButtonForm,children:"Back"}),Object(q.jsx)(De,{variant:"contained",color:"primary",onClick:v,startIcon:h,children:x?"Add":"Next"})]})]})})]})})}var xt=Object(N.a)((function(e){return{FormWrapper:{width:"100%",height:"100%",top:"0",left:"0",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly",position:"absolute",background:"white",zIndex:2},Form:{display:"flex",flexDirection:"column",height:"33%",width:"100%",maxWidth:"50%",justifyContent:"space-around"},Stepper:{width:"100%",maxWidth:"45%"},backButton:{position:"absolute",zIndex:2,top:"16px",left:"16px"},backButtonForm:{marginRight:e.spacing(4)},Buttons:{display:"flex",justifyContent:"center"}}}));function vt(e){var t,n=e.options,a=void 0===n?[]:n,r=ht(),i=Object(c.useState)((function(){return a})),s=Object(o.a)(i,2),l=s[0],u=s[1],d=Object(Se.h)((function(e){return e.coinName})),j=Object(o.a)(d,1)[0],p=Object(c.useState)((function(){return!1})),b=Object(o.a)(p,2),m=b[0],f=b[1],x=function(){return f((function(e){return!e}))},v=ve("coins?coinName=".concat(encodeURIComponent(j))),h=v.loading,N=v.data;we(v.error),Object(c.useEffect)((function(){N&&200===N.statusCode&&u(N.results.map((function(e){var t=e.address,n=e.walletName;return{value:n,label:"".concat(n,":").concat(t)}})))}),[N]);var w=h||null===h,y=(null===N||void 0===N||null===(t=N.results)||void 0===t?void 0:t.length)<=0;return Object(q.jsxs)(q.Fragment,{children:[!y&&Object(q.jsx)(Se.d,{children:Object(q.jsx)("div",{style:{maxWidth:"624px",padding:"0px 24px",margin:"auto"},children:Object(q.jsx)(Ve,{placeholder:"Select a wallet for: ".concat(j),isDisabled:w,isLoading:w,options:l,name:"walletName",validators:[Ot]})})}),y&&Object(q.jsxs)("div",{className:r.NoWallets,children:[Object(q.jsxs)(_.a,{color:"textSecondary",gutterBottom:!0,children:["None of your wallets contains the coin: ",Object(q.jsx)("b",{children:j})]}),Object(q.jsxs)(O.a,{size:"small",variant:"contained",disableElevation:!0,color:"primary",startIcon:Object(q.jsx)(g.a,{}),onClick:x,children:["Add ",j," to a Wallet"]})]}),m&&Object(q.jsx)(ft,{toggleWalletForm:x,coinName:j})]})}var Ot=function(e){return"string"===typeof e?void 0:"required"},ht=Object(N.a)((function(){return{NoWallets:{width:"100%",height:"80px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-around",position:"relative"}}}));function gt(e){var t=e.options,n=void 0===t?[]:t,a=e.modeTarget,r=e.onChangeValue,i=Object(c.useState)((function(){return n})),s=Object(o.a)(i,2),l=s[0],u=s[1],d=Object(Se.h)((function(e){return e.poolConfig.algo})),j=Object(o.a)(d,1)[0],p=ve("miners/_installed?algo=".concat(j)),b=p.loading,m=p.data;we(p.error);Object(c.useEffect)((function(){m&&200===m.statusCode&&u(m.results.filter((function(e){return e.minerMode.toLowerCase()===a.toLowerCase()})).map((function(e){var t=e.minerName,n=e.assetId,a=e.tagName;return{value:{minerName:t,minerAssetId:n,minerTagName:a,supportGPUsRegex:e.supportGPUsRegex},label:"".concat(t,": ").concat(a)}})))}),[m]);var f=b||null===b;return Object(q.jsx)("div",{style:{maxWidth:"624px",padding:"0px 24px",margin:"auto"},children:Object(q.jsx)(Ve,{placeholder:"Select a miner tool...",isDisabled:f,isLoading:f,options:l,matchValue:function(e,t){return e.find((function(e){var n=e.value;return(null===n||void 0===n?void 0:n.minerAssetId)===(null===t||void 0===t?void 0:t.minerAssetId)}))},onChangeValue:r,name:"minerInfo",validators:[Nt]})})}var Nt=function(e){return e&&"number"===typeof e.minerAssetId?void 0:"required"};function wt(e){var t=e.options,n=void 0===t?[]:t,a=Object(c.useState)((function(){return n})),r=Object(o.a)(a,2),i=r[0],s=r[1],l=Object(Se.h)((function(e){return e.miner.minerInfo.supportGPUsRegex})),u=Object(o.a)(l,1)[0];console.log("supportGPUsRegex ",u);var d=ve("gpus?processor=".concat(u)),j=d.loading,p=d.data;we(d.error),Object(c.useEffect)((function(){p&&200===p.statusCode&&s(p.results.map((function(e){var t=e.name,n=e.id;return{value:n,label:"".concat(t," - id(").concat(n,")")}})))}),[p]);var b=j||null===j;return Object(q.jsx)("div",{style:{maxWidth:"624px",padding:"0px 24px",margin:"auto"},children:Object(q.jsx)(Ve,{matchValue:function(e,t){return null===t||void 0===t?void 0:t.split(",").map((function(t){return e.find((function(e){var n=e.value;return Number(t)===Number(n)}))}))},reduceValue:function(e){return e.map((function(e){var t=e.value;return Number(t)})).sort().join(",")},placeholder:"Select gpus...",isMulti:!0,isDisabled:b,isLoading:b,options:i,name:"gpus",validators:[yt]})})}var yt=function(e){return"string"===typeof e&&/^(-1)$|^\d+(,\d+)*$/.test(e)?void 0:"required"};function Ct(e){var t=e.modeTarget,n=["Version","GPUs"],a=Object(c.useState)((function(){return 0})),r=Object(o.a)(a,2),i=r[0],s=r[1],l=kt(),u=function(){return s((function(e){return++e}))},d=function(e){var t=e.currentTarget;t.classList.contains("MuiStep-completed")&&s(Number(t.dataset.index))};return Object(q.jsxs)("div",{children:[Object(q.jsx)(Te.a,{className:l.Stepper,activeStep:i,children:n.map((function(e,t){return Object(q.jsx)(Pe.a,{"data-index":t,onClick:d,children:Object(q.jsx)(Re.a,{children:e})},e)}))}),Object(q.jsxs)(et,{activeStep:i,prev:function(){return s((function(e){return--e}))},next:u,evaluatePrev:It,evaluateNext:St,children:[0===i&&Object(q.jsx)(gt,{onChangeValue:u,modeTarget:t},"0"),1===i&&Object(q.jsx)(wt,{},"1")]})]})}var kt=Object(N.a)((function(){return{Stepper:{paddingTop:0,maxWidth:"624px",padding:"0px 24px",margin:"auto"}}}));function St(e,t){var n;return 0===t&&(null===(n=e.miner)||void 0===n?void 0:n.minerInfo)}function It(e,t){return t>0}function Wt(e){var t=e.modeTarget;return Object(q.jsxs)("div",{children:[Object(q.jsx)(Se.c,{type:"hidden",name:"gpus",value:"-1"}),Object(q.jsx)(gt,{modeTarget:t})]})}function Tt(){var e=Object(Se.h)((function(e){return e.minerMode})),t=Object(o.a)(e,1)[0];return Object(q.jsx)("div",{children:Object(q.jsx)(Se.a,{object:!0,name:"miner",validators:[Pt],children:Object(q.jsxs)(Se.d,{children:["gpu"===t&&Object(q.jsx)(Ct,{modeTarget:t},"gpu"),"cpu"===t&&Object(q.jsx)(Wt,{modeTarget:t},"cpu")]})})})}function Pt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).every((function(t){return"undefined"!==typeof e[t]}))?void 0:"error"}function Rt(e){var t=e.activeStep,n=Object(Se.f)({type:"custom",name:"activeStep",value:t}),a=n.value,r=n.setValue;return Object(c.useEffect)((function(){t!==a&&r(t)}),[t,a]),null}var Et=["activeStep","minerMode","poolConfig","miner"];function Dt(){var e=Object(Se.g)().state,t=Bt(),n=(e.activeStep,e.minerMode),a=e.poolConfig,r=e.miner,o=Object(ke.a)(e,Et),c=r.minerInfo,i=r.gpus,s="gpu"===n?Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)({},o),a),c),{},{gpus:i}):Object(b.a)(Object(b.a)(Object(b.a)({},o),a),c);return Object(q.jsx)("div",{className:t.Summary,children:Object.keys(At).filter((function(e){return s[e]})).map((function(e){return Object(q.jsxs)("div",{className:t.Tag,children:[Object(q.jsx)("span",{className:t.TagTitle,children:"".concat(At[e])}),":",Object(q.jsx)("span",{className:t.Tagspan,children:"".concat(s[e])})]},e)}))})}var Bt=Object(N.a)({Summary:{flex:1,flexWrap:"wrap",alignItems:"center",display:"flex",justifyContent:"center",maxWidth:"640px",margin:"auto",maxHeight:"246px",overflow:"auto"},Tag:{padding:"6px 14px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",background:"#ededed",margin:"4px"},Tagspan:{marginLeft:"4px",textDecoration:"underline",fontWeight:"bold",fontSize:"18px"},TagTitle:{textTransform:"uppercase"}}),At={workerName:"Worker Name",walletName:"Wallet",coinName:"Coin",poolName:"Pool Name",poolRegion:"Pool Region",poolPort:"Pool Port",minerName:"Miner",gpus:"Gpus",algo:"Algorithm"},Mt=n(319),_t=n(324);function Ft(){var e=Lt(),t=Object(Se.f)({name:"minerMode",type:"custom",validators:[zt]}),n=t.value,a=t.setValue,r=ve("miners/_installed"),o=r.loading,c=r.data;if(o||null===o)return Object(q.jsx)("div",{className:e.loadingBar,children:Object(q.jsx)(w.a,{})});var i=((null===c||void 0===c?void 0:c.results)||[]).map((function(e){return e.minerMode})).map((function(e){return e.toLowerCase()}));if(!i.includes("gpu"))return Object(q.jsxs)("div",{className:e.ModePickerWrapper,children:[Object(q.jsx)(_t.a,{row:!0,"aria-label":"minerMode",name:"minerMode",value:"cpu",children:Object(q.jsx)(y.a,{value:"cpu",control:Object(q.jsx)(Mt.a,{inputProps:{"aria-label":"CPU"}}),label:"CPU mode"})}),Object(q.jsx)(_.a,{className:e.textSecondary,color:"textSecondary",children:"You have installed miners which support CPU only."}),Object(q.jsxs)(_.a,{color:"textSecondary",children:["If you want to mine using GPU please install a miner that supports GPU. ",Object(q.jsx)(f.b,{to:"/miners",children:"Click here"})]}),Object(q.jsx)(Se.c,{type:"hidden",name:"minerMode",value:"cpu"})]});if(!i.includes("cpu"))return Object(q.jsxs)("div",{className:e.ModePickerWrapper,children:[Object(q.jsx)(_t.a,{row:!0,"aria-label":"minerMode",name:"minerMode",value:"gpu",children:Object(q.jsx)(y.a,{value:"gpu",control:Object(q.jsx)(Mt.a,{inputProps:{"aria-label":"GPU"}}),label:"GPU mode"})}),Object(q.jsx)(_.a,{className:e.textSecondary,color:"textSecondary",children:"You have installed miners which support GPU only."}),Object(q.jsxs)(_.a,{color:"textSecondary",children:["If you want to mine using CPU please install a miner that supports CPU. ",Object(q.jsx)(f.b,{to:"/miners",children:"Click here"})]}),Object(q.jsx)(Se.c,{type:"hidden",name:"minerMode",value:"gpu"})]});return Object(q.jsx)("div",{className:e.ModePickerWrapper,children:Object(q.jsxs)(_t.a,{row:!0,"aria-label":"minerMode",name:"minerMode",value:n||null,onChange:function(e){return a(e.target.value)},children:[Object(q.jsx)(y.a,{value:"gpu",control:Object(q.jsx)(Mt.a,{name:"miner-picker-mode",inputProps:{"aria-label":"GPU"}}),label:"GPU mode"}),Object(q.jsx)(y.a,{value:"cpu",control:Object(q.jsx)(Mt.a,{name:"miner-picker-mode",inputProps:{"aria-label":"CPU"}}),label:"CPU mode"})]})})}var zt=function(e){return"string"===typeof e?void 0:"required"},Lt=Object(N.a)({ModePickerWrapper:{flex:1,flexDirection:"column",alignItems:"center",display:"flex",justifyContent:"center"},loadingBar:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"},textSecondary:{marginTop:"24px"}}),Ut=["activeStep","poolConfig","miner"],Gt=["supportGPUsRegex"],Vt=["minerInfo"],qt=le;function Ht(e){var t=e.match,n=Xt(),a=t.params.rigId,r=Object(m.f)(),i=Object(c.useState)(0),s=Object(o.a)(i,2),l=s[0],u=s[1],d=ee().bus,j=ve("miners/_installed"),p=j.loading,f=j.error,x=ve("wallets"),v=x.loading,h=x.error;if(Object(c.useEffect)((function(){var e=function(){return u((function(e){return++e}))};return d.on("GO_NEXT",e),function(){d.off("GO_NEXT",e)}}),[]),v||null===v||p||null===p)return Object(q.jsx)("div",{className:n.loadingBar,children:Object(q.jsx)(w.a,{})});if(404===(null===f||void 0===f?void 0:f.statusCode))return Object(q.jsxs)("div",{className:n.ErrorWrapper,children:[Object(q.jsx)(_.a,{variant:"h4",children:f.message}),Object(q.jsx)(O.a,{size:"large",variant:"contained",color:"primary",startIcon:Object(q.jsx)(g.a,{}),disableElevation:!0,onClick:function(){return r.push("/miners")},children:"Install Miners"}),Object(q.jsx)(_.a,{className:n.textSecondary,color:"textSecondary",children:"Please install a miner software!"})]});if(404===(null===h||void 0===h?void 0:h.statusCode))return Object(q.jsxs)("div",{className:n.ErrorWrapper,children:[Object(q.jsx)(_.a,{variant:"h4",children:h.message}),Object(q.jsx)(O.a,{size:"large",variant:"contained",color:"primary",startIcon:Object(q.jsx)(g.a,{}),disableElevation:!0,onClick:function(){return r.push("/wallets/add-wallet")},children:"Add New Wallet"}),Object(q.jsx)(_.a,{className:n.textSecondary,color:"textSecondary",children:"You do not have any wallet yet! Please add a wallet!"})]});var N=function(){r.push("/rigs/".concat(a,"/workers"))},y=function(){var e=Object(I.a)(S.a.mark((function e(t){var n,a,r,o,c,i,s,l;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onSubmit ",t),t.activeStep,n=t.poolConfig,a=t.miner,r=Object(ke.a)(t,Ut),o=a.minerInfo,o.supportGPUsRegex,c=Object(ke.a)(o,Gt),i=Object(ke.a)(a,Vt),s=Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)({},r),n),c),i),"workers",l=$(J("workers",{method:"POST",body:s})),d.emit(qt,{promise:l,label:"Creating ".concat(t.workerName,"...")}),e.next=9,l;case 9:setTimeout(N,100);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(q.jsxs)("div",{className:"FormWorker",children:[Object(q.jsx)("div",{className:"FormWorker_Nav",children:Object(q.jsx)(O.a,{size:"small",variant:"contained",startIcon:Object(q.jsx)(We.a,{}),disableElevation:!0,onClick:N,children:"Back"})}),Object(q.jsxs)("div",{className:"FormWorker_Wrapper",children:[Object(q.jsxs)(Se.b,{reducers:Kt,onChange:function(e){return console.log("onChange ",e)},onSubmit:y,children:[Object(q.jsx)(Rt,{activeStep:l}),Object(q.jsx)(Ae,{activeStep:l,onChangeStep:function(e){return u(e)},children:Yt(l)})]}),Object(q.jsx)("div",{id:"FormWorkerPortal"})]})]})}function Yt(e){switch(e){case 0:return Object(q.jsx)(Se.d,{children:Object(q.jsx)(ze,{},e)});case 1:return Object(q.jsx)(Se.d,{children:Object(q.jsx)(Ft,{},e)});case 2:return Object(q.jsx)(Se.d,{children:Object(q.jsx)(nt,{},e)});case 3:return Object(q.jsx)(Se.d,{children:Object(q.jsx)(it,{},e)});case 4:return Object(q.jsx)(vt,{},e);case 5:return Object(q.jsx)(Se.d,{children:Object(q.jsx)(Tt,{},e)});case 6:return Object(q.jsx)(Dt,{},e)}}function Kt(e,t){var n,a,r,o,c,i,s,l,u,d,j,p,m,f,x=e;if(void 0!==x.addNewCoinForm&&x.addNewCoinForm.walletName)return Object(b.a)(Object(b.a)({},e),{},{walletName:x.addNewCoinForm.walletName});if((null===(n=x.poolConfig)||void 0===n?void 0:n.poolName)&&(null===(a=t.poolConfig)||void 0===a?void 0:a.poolName)&&(null===(r=t.poolConfig)||void 0===r?void 0:r.poolName)!==(null===(o=x.poolConfig)||void 0===o?void 0:o.poolName)){var v=x.workerName,O=x.minerMode;return{workerName:v,poolConfig:{poolName:x.poolConfig.poolName},minerMode:O}}if((null===(c=x.poolConfig)||void 0===c?void 0:c.algo)&&(null===(i=t.poolConfig)||void 0===i?void 0:i.algo)&&(null===(s=t.poolConfig)||void 0===s?void 0:s.algo)!==(null===(l=x.poolConfig)||void 0===l?void 0:l.algo)){var h=x.workerName,g=x.minerMode,N=x.poolConfig;return{workerName:h,poolConfig:{poolName:N.poolName,algo:N.algo},minerMode:g}}if(x.minerMode&&t.minerMode&&t.minerMode!==x.minerMode)return{workerName:x.workerName,minerMode:x.minerMode};if(x.coinName&&t.coinName&&t.coinName!==x.coinName)return{workerName:x.workerName,coinName:x.coinName,poolConfig:x.poolConfig,minerMode:x.minerMode};if((null===(u=x.miner)||void 0===u?void 0:u.minerInfo)&&(null===(d=t.miner)||void 0===d?void 0:d.minerInfo)&&(null===(j=t.miner)||void 0===j||null===(p=j.minerInfo)||void 0===p?void 0:p.minerName)!==(null===(m=x.miner)||void 0===m||null===(f=m.minerInfo)||void 0===f?void 0:f.minerName)){var w=x.miner.minerInfo;return Object(b.a)(Object(b.a)({},x),{},{miner:{minerInfo:w}})}return x}var Xt=Object(N.a)((function(){return{ErrorWrapper:{width:"100%",display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",alignItems:"center","& > button":{marginTop:"24px"}},loadingBar:{width:"100%",display:"flex",height:"100%",justifyContent:"center",alignItems:"center"},textSecondary:{marginTop:"24px"}}})),Jt=n(306),$t=n(152),Zt=n.n($t),Qt=n(25),en=n.n(Qt);function tn(e){var t=e.goToSummary,n=Object(Se.g)().state,a=nn.validate(n).error;return Object(q.jsx)(Jt.a,{disabled:a,style:{flexShrink:0,position:"absolute",left:"auto",right:"16px",top:"auto",bottom:"16px"},onClick:t,color:"secondary","aria-label":"summary",children:Object(q.jsx)(Zt.a,{})})}var nn=en.a.object({activeStep:en.a.number().required(),coinName:en.a.string().required(),minerMode:en.a.string().required(),walletName:en.a.string().required(),workerName:en.a.string().required(),miner:en.a.object({gpus:en.a.string().required(),minerInfo:en.a.object({minerAssetId:en.a.number().required(),minerName:en.a.string().required(),minerTagName:en.a.string().required(),supportGPUsRegex:en.a.string()})}).required(),poolConfig:en.a.object({algo:en.a.string().required(),poolName:en.a.string().required(),poolPort:en.a.string().required(),poolRegion:en.a.string().required()}).required()}),an=Object(N.a)((function(){return{loadingBar:{width:"100%",display:"flex",height:"100%",flexDirection:"column",justifyContent:"center",alignItems:"center"},label:{marginBottom:"32px"}}}));function rn(e){var t=an();return Object(q.jsxs)("div",{className:t.loadingBar,children:[e.label&&Object(q.jsx)(_.a,{className:t.label,color:"textSecondary",gutterBottom:!0,children:e.label}),Object(q.jsx)(w.a,Object(b.a)({},e))]})}var on=["activeStep","poolConfig","miner"],cn=["supportGPUsRegex"],sn=["minerInfo"],ln=le;function un(e){var t=e.match,n=Object(m.f)(),a=Object(c.useState)(0),r=Object(o.a)(a,2),i=r[0],s=r[1],l=ee().bus,u=t.params,d=u.rigId,j=u.workerId,p=ve("workers/".concat(j)),f=p.data,x=p.loading;if(we(p.error),Object(c.useEffect)((function(){var e=function(){return s((function(e){return++e}))};return l.on("GO_NEXT",e),function(){l.off("GO_NEXT",e)}}),[]),x||null===x)return Object(q.jsx)(rn,{size:60,label:"Loading worker info in progress..."});var v=function(){return n.push("/rigs/".concat(d,"/workers"))},h=function(){var e=Object(I.a)(S.a.mark((function e(t){var n,a,r,o,c,i,s,u,d;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onSubmit ",t),t.activeStep,n=t.poolConfig,a=t.miner,r=Object(ke.a)(t,on),o=a.minerInfo,o.supportGPUsRegex,c=Object(ke.a)(o,cn),i=Object(ke.a)(a,sn),s=Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)({},r),n),c),i),u="workers/".concat(j),d=$(J(u,{method:"PUT",body:s})),l.emit(ln,{promise:d,label:"Saving changes for ".concat(t.workerName,"...")}),e.next=9,d;case 9:setTimeout(v,100);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(e){var t=e.workerName,n=e.walletName,a=e.poolRegion,r=e.poolName,o=e.poolPort,c=e.minerMode,i=e.gpus,s=e.algo,l=e.coinName,u=e.minerName,d=e.minerTagName,j=e.minerAssetId,p=e.supportGPUsRegex,b={minerName:u,minerAssetId:j,minerTagName:d,supportGPUsRegex:p};return{workerName:t,walletName:n,poolConfig:{poolRegion:a,poolName:r,poolPort:String(o),algo:s},minerMode:c,coinName:l,miner:{minerInfo:b,gpus:i}}}(f.results);return Object(q.jsxs)("div",{className:"FormWorker",children:[Object(q.jsx)("div",{className:"FormWorker_Nav",children:Object(q.jsx)(O.a,{size:"small",variant:"contained",startIcon:Object(q.jsx)(We.a,{}),disableElevation:!0,onClick:v,children:"Back"})}),Object(q.jsxs)("div",{className:"FormWorker_Wrapper",children:[Object(q.jsxs)(Se.b,{initialState:g,reducers:jn,onChange:function(e){return console.log("onChange ",e)},onSubmit:h,children:[Object(q.jsx)(Rt,{activeStep:i}),Object(q.jsx)(Ae,{activeStep:i,onChangeStep:function(e){return s(e)},children:dn(i)}),6!=i&&Object(q.jsx)(tn,{goToSummary:function(){return s(6)}})]}),Object(q.jsx)("div",{id:"FormWorkerPortal"})]})]})}function dn(e){switch(e){case 0:return Object(q.jsx)(Se.d,{children:Object(q.jsx)(ze,{})},e);case 1:return Object(q.jsx)(Se.d,{children:Object(q.jsx)(Ft,{})},e);case 2:return Object(q.jsx)(Se.d,{children:Object(q.jsx)(nt,{})},e);case 3:return Object(q.jsx)(Se.d,{children:Object(q.jsx)(it,{})},e);case 4:return Object(q.jsx)(vt,{},e);case 5:return Object(q.jsx)(Se.d,{children:Object(q.jsx)(Tt,{})},e);case 6:return Object(q.jsx)(Dt,{},e)}}function jn(e,t){var n,a,r,o,c,i,s,l,u,d,j,p,m,f,x=e;if(void 0!==x.addNewCoinForm&&x.addNewCoinForm.walletName)return Object(b.a)(Object(b.a)({},e),{},{walletName:x.addNewCoinForm.walletName});if((null===(n=x.poolConfig)||void 0===n?void 0:n.poolName)&&(null===(a=t.poolConfig)||void 0===a?void 0:a.poolName)&&(null===(r=t.poolConfig)||void 0===r?void 0:r.poolName)!==(null===(o=x.poolConfig)||void 0===o?void 0:o.poolName)){var v=x.workerName,O=x.minerMode;return{workerName:v,poolConfig:{poolName:x.poolConfig.poolName},minerMode:O}}if((null===(c=x.poolConfig)||void 0===c?void 0:c.algo)&&(null===(i=t.poolConfig)||void 0===i?void 0:i.algo)&&(null===(s=t.poolConfig)||void 0===s?void 0:s.algo)!==(null===(l=x.poolConfig)||void 0===l?void 0:l.algo)){var h=x.workerName,g=x.minerMode,N=x.poolConfig;return{workerName:h,poolConfig:{poolName:N.poolName,algo:N.algo},minerMode:g}}if(x.minerMode&&t.minerMode&&t.minerMode!==x.minerMode)return{workerName:x.workerName,minerMode:x.minerMode};if(x.coinName&&t.coinName&&t.coinName!==x.coinName)return{workerName:x.workerName,coinName:x.coinName,poolConfig:x.poolConfig,minerMode:x.minerMode};if((null===(u=x.miner)||void 0===u?void 0:u.minerInfo)&&(null===(d=t.miner)||void 0===d?void 0:d.minerInfo)&&(null===(j=t.miner)||void 0===j||null===(p=j.minerInfo)||void 0===p?void 0:p.minerName)!==(null===(m=x.miner)||void 0===m||null===(f=m.minerInfo)||void 0===f?void 0:f.minerName)){var w=x.miner.minerInfo;return Object(b.a)(Object(b.a)({},x),{},{miner:{minerInfo:w}})}return x}function pn(){var e=Object(m.i)();return Object(q.jsxs)(m.c,{children:[Object(q.jsx)(m.a,{path:"".concat(e.path),component:ye,exact:!0}),Object(q.jsx)(m.a,{path:"".concat(e.path,"/add"),component:Ht,exact:!0}),Object(q.jsx)(m.a,{path:"".concat(e.path,"/edit/:workerId"),component:un,exact:!0})]})}var bn=n(308),mn=n(312),fn=n(311),xn=n(307),vn=n(309),On=n(310);function hn(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(null),i=Object(o.a)(r,2),s=i[0],l=i[1],u=Object(c.useState)(null),d=Object(o.a)(u,2),j=d[0],p=d[1],b=function(){var e=Object(I.a)(S.a.mark((function e(t){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,J("miners",{method:"POST",body:t});case 4:if(!((n=e.sent).status>=400)){e.next=7;break}throw new Error("Error downloading: ".concat(t.minerName,"! Try again!"));case 7:return e.next=9,n.json();case 9:if(201===(r=e.sent).statusCode){e.next=12;break}throw new Error("Error installing: ".concat(t.minerName," - releaseId: ").concat(releaseId));case 12:l(!1),a(r),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),l(!1),p(e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}();return{loading:s,install:b,error:j,data:n}}var gn={minWidth:"111px",minHeight:"36px"},Nn=function(){return null};function wn(e){var t=e.assetId,n=e.releaseId,a=e.minerName,r=hn(),o=r.install,c=r.loading,i=r.data,s=r.error,l=function(e){var t=e.minerName,n=ve("miners/".concat(t,"/_installed"));return{checking:n.loading,data:n.data,error:n.error}}({minerName:a}),u=l.checking,d=l.data;we(s);var j=d&&"success"===d.status&&void 0!==d.results.find((function(e){var n=e.assetId;return t===n})),p=j||i&&"success"===i.status?"Reinstall":"Install",b=j||i&&"success"===i.status?"secondary":"primary",m=u||null===u||!0===c,f=m?Nn:function(){return o({assetId:t,releaseId:n,minerName:a})};return Object(q.jsx)(O.a,{style:gn,size:"medium",variant:"contained",disabled:m,onClick:f,color:b,children:c?Object(q.jsx)(w.a,{size:20}):p})}var yn=Object(N.a)({table:{flex:1},TableHead:{fontWeight:"bold"}});function Cn(e){var t=e.minersInfo,n=yn();return Object(q.jsx)(xn.a,{className:n.table,children:Object(q.jsxs)(bn.a,{"aria-label":"miner details",children:[Object(q.jsx)(vn.a,{children:Object(q.jsxs)(On.a,{children:[Object(q.jsx)(fn.a,{className:n.TableHead,children:"Tag Name"}),Object(q.jsx)(fn.a,{className:n.TableHead,children:"Info Release"}),Object(q.jsx)(fn.a,{className:n.TableHead,children:"Supports"}),Object(q.jsx)(fn.a,{className:n.TableHead,children:"Actions"})]})}),Object(q.jsx)(mn.a,{children:t.map((function(e){var t=e.minerName,n=e.nameWithTag,a=e.tag_name,r=e.supports,o=e.html_url,c=e.assets,i=e.id;return Object(q.jsxs)(On.a,{children:[Object(q.jsx)(fn.a,{component:"th",scope:"row",children:n}),Object(q.jsx)(fn.a,{component:"th",scope:"row",children:Object(q.jsx)("a",{title:a,target:"_blank",href:o,rel:"noreferrer",children:o})}),Object(q.jsx)(fn.a,{component:"th",children:r}),Object(q.jsx)(fn.a,{component:"th",children:Object(q.jsx)(wn,{assetId:c.id,releaseId:i,minerName:t})})]},a)}))})]})})}var kn=Object(N.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex",marginTop:"8px"},loadingBar:{width:"100%",display:"flex",height:"100%",justifyContent:"center",alignItems:"center"}}}));function Sn(){var e=kn(),t=Object(c.useState)((function(){return null})),n=Object(o.a)(t,2),a=n[0],r=n[1];return Object(c.useEffect)((function(){function e(){return(e=Object(I.a)(S.a.mark((function e(){var t,n,a,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J("miners");case 2:return t=e.sent,n=t.results.map((function(e){var t=e.name,n=e.minerMode,a=e.supports;return J("miners/".concat(t.toLowerCase(),"/releases")).then((function(e){return e.results.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{minerName:t,supports:a,nameWithTag:"".concat(t," ").concat(e.tag_name),minerMode:n})}))}))})),e.next=6,Promise.all(n);case 6:a=e.sent,o=a.reduce((function(e,t){return[].concat(Object(Oe.a)(e),Object(Oe.a)(t))}),[]).sort((function(e,t){return e.minerMode>t.minerMode?-1:t.minerMode>e.minerMode?1:0})),r(o);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log("Mineres"),function(){e.apply(this,arguments)}()}),[]),null===a?Object(q.jsx)("div",{className:e.loadingBar,children:Object(q.jsx)(w.a,{})}):Object(q.jsx)("div",{className:e.root,children:Object(q.jsx)(Cn,{minersInfo:a})})}var In=n(243),Wn=n(102),Tn=n.n(Wn),Pn=n(101),Rn=n.n(Pn),En=Object(N.a)({NoCoins:{flex:1,flexDirection:"column",alignItems:"center",display:"flex",justifyContent:"center"},button:{marginTop:"32px"},icon:{marginRight:"8px"}});function Dn(e){var t=e.walletName,n=En(),a=Object(m.f)(),r=Object(m.i)();return Object(q.jsxs)("div",{className:n.NoCoins,children:[Object(q.jsxs)(_.a,{variant:"h4",children:[Object(q.jsx)(Rn.a,{className:n.icon}),Object(q.jsx)("b",{children:t})," contains no coins!"]}),Object(q.jsxs)(O.a,{variant:"contained",size:"large",color:"primary",className:n.button,startIcon:Object(q.jsx)(g.a,{}),onClick:function(){return a.push("".concat(r.url,"/add-coin"))},children:["Add a new coin to ",t]})]})}var Bn=le,An={target:null,status:!1};function Mn(){var e=Fn(),t=Object(c.useState)((function(){return An})),n=Object(o.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)((function(){return!1})),s=Object(o.a)(i,2),l=s[0],u=s[1],d=ee().bus,j=Object(m.h)().walletName,p=Object(m.i)(),f=Object(m.f)(),x=ve("coins?walletName=".concat(j)),v=x.loading,h=x.data,N=x.error,y=x.updateData;if(we(N),v||null===v)return Object(q.jsx)("div",{className:e.loadingBar,children:Object(q.jsx)(w.a,{})});var C=function(e){var t=e.id;y((function(e){return Object(b.a)(Object(b.a)({},e),{},{results:e.results.filter((function(e){return e.rowid!==t}))})}))},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:An;return r((function(t){return Object(b.a)(Object(b.a)({},t),{},{target:e,status:!t.status})}))},W=function(){var e=Object(I.a)(S.a.mark((function e(){var t,n,r,o,c,i,s,l;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.target,n=t.walletName,r=t.coinName,o=t.rowid,u(!0),k(),e.prev=3,c="coins/".concat(o),i=$(J(c,{method:"DELETE"})),s="Deleting Coin: '".concat(r,"' from wallet '").concat(n,"'..."),d.emit(Bn,{promise:i,label:s}),e.next=10,i;case 10:l=e.sent,C({id:o}),console.log("onDelete Coin",l),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.error(e.t0);case 18:return e.prev=18,u(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})));return function(){return e.apply(this,arguments)}}(),T=h.results;return(null===T||void 0===T?void 0:T.length)<=0?Object(q.jsx)(Dn,{walletName:j}):Object(q.jsxs)("div",{className:e.WalletDetails,children:[Object(q.jsx)("div",{className:e.NavBar,children:Object(q.jsx)(O.a,{disabled:l,size:"small",variant:"contained",startIcon:Object(q.jsx)(We.a,{}),className:e.backButton,disableElevation:!0,onClick:function(){var e=p.params.rigId;f.push("/rigs/".concat(e,"/wallets"))},children:"Back"})}),Object(q.jsxs)("div",{className:e.root,children:[Object(q.jsx)(xn.a,{className:e.table,children:Object(q.jsxs)(bn.a,{"aria-label":"coins details",children:[Object(q.jsx)(vn.a,{children:Object(q.jsxs)(On.a,{children:[Object(q.jsx)(fn.a,{className:e.TableHead,children:"Coin Name"}),Object(q.jsx)(fn.a,{className:e.TableHead,children:"Address"}),Object(q.jsx)(fn.a,{className:e.TableHead,children:"Actions"})]})}),Object(q.jsx)(mn.a,{children:T.map((function(t){var n=t.walletName,a=t.coinName,r=t.address,o=t.rowid;return Object(q.jsxs)(On.a,{children:[Object(q.jsx)(fn.a,{component:"th",scope:"row",children:Object(q.jsxs)("div",{className:e.coinName,children:[Object(q.jsx)("img",{alt:a,src:"/icons/".concat(a,".png"),onError:function(e){e.target.src="/icons/notfound.png"}}),Object(q.jsx)("span",{children:a})]})}),Object(q.jsx)(fn.a,{component:"th",scope:"row",title:r,className:e.ellipsis,children:Object(q.jsxs)("div",{className:e.address,children:[Object(q.jsx)("span",{className:"text-ellipsis",children:r}),Object(q.jsx)(In.a,{title:"Copy ".concat(a," Address"),className:e.CopyButton,size:"small",onClick:function(){return function(e){return navigator.clipboard.writeText(e)}(r)},"aria-label":"Copy ".concat(a," Address"),children:Object(q.jsx)(Tn.a,{})})]})}),Object(q.jsx)(fn.a,{component:"th",scope:"row",children:Object(q.jsx)(O.a,{disabled:l,size:"small",title:"Remove ".concat(a),disableElevation:!0,variant:"contained",startIcon:Object(q.jsx)(E.a,{}),onClick:function(){return k({coinName:a,walletName:n,rowid:o})},children:"Remove"})})]},a)}))})]})}),Object(q.jsxs)(O.a,{variant:"contained",size:"small",color:"primary",className:e.buttonAdd,startIcon:Object(q.jsx)(g.a,{}),onClick:function(){var e=p.params.rigId;f.push("/rigs/".concat(e,"/wallets/add-coin?redirect=/wallets/").concat(j))},children:["Add Coin to ",j]})]}),a.status&&Object(q.jsx)(ie,{content:_n,onCancel:function(){return k()},onConfirm:W})]})}var _n="Deleting a coin will remove the 'idle' workers which are using it",Fn=Object(N.a)((function(e){return{table:{flex:1,"& table":{border:"1px solid #CCC"}},root:{flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex",padding:"8px"},WalletDetails:{display:"flex",flexDirection:"column",flex:1},loadingBar:{flex:1,alignItems:"center",display:"flex",justifyContent:"center"},NavBar:{width:"100%",display:"flex",padding:"16px 8px"},TableHead:{fontWeight:"bold"},ellipsis:{textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"380px",overflow:"hidden"},coinName:{display:"flex",alignItems:"center","& > img":{height:"26px",marginRight:"4px"}},address:{display:"flex",alignItems:"center","& > span":{marginRight:"4px"}},buttonAdd:{position:"absolute",top:"auto",bottom:"16px",left:"auto",right:"16px"}}})),zn=Object(N.a)({FormWrapper:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative"},Form:{display:"flex",flexDirection:"column",marginTop:"32px",height:"33%",justifyContent:"space-around"},backButton:{position:"absolute",zIndex:2,top:"16px",left:"16px"}});function Ln(){var e=zn(),t=Object(m.i)(),n=Object(m.f)(),a=Object(c.useState)(null),r=Object(o.a)(a,2),i=r[0],s=r[1];we(i);var l=function(){var e=Object(I.a)(S.a.mark((function e(a){var r,o,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"wallets",e.next=3,J("wallets",{method:"POST",body:a});case 3:if(201===(r=e.sent).statusCode&&(o=t.params.rigId,n.push("/rigs/".concat(o,"/wallets"))),"error"===r.status&&(c="Wallet named: '".concat(a.walletName,"' already exist!"),s(new Error(c))),201===r.statusCode){e.next=8;break}return e.abrupt("return",Promise.reject());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(q.jsxs)("div",{className:e.FormWrapper,children:[Object(q.jsx)(O.a,{size:"small",variant:"contained",startIcon:Object(q.jsx)(We.a,{}),className:e.backButton,disableElevation:!0,onClick:function(){var e=t.params.rigId;n.push("/rigs/".concat(e,"/wallets"))},children:"Back"}),Object(q.jsx)(_.a,{variant:"h3",component:"h3",children:"Add New Wallet"}),Object(q.jsxs)(Se.b,{className:e.Form,onSubmit:l,children:[Object(q.jsx)(Fe,{autoFocus:!0,helperText:"Accept only letters and numbers...{2,16}",validators:[Un],label:"Type Wallet Name...",variant:"outlined",name:"walletName"}),Object(q.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(q.jsx)(De,{size:"large",startIcon:Object(q.jsx)(g.a,{}),children:"Save"})})]})]})}var Un=function(e){return e&&/^[a-zA-Z0-9]{2,16}$/.test(e)?void 0:"Name not valid"};function Gn(e){var t=e.options,n=void 0===t?[]:t,a=e.onChangeValue,r=Object(c.useState)((function(){return n})),i=Object(o.a)(r,2),s=i[0],l=i[1],u=ve("coins/_supported"),d=u.loading,j=u.data;we(u.error),Object(c.useEffect)((function(){j&&200===j.statusCode&&l(j.results.map((function(e){var t=e.symbol;return{value:t,label:t}})))}),[j]);var p=d||null===d;return Object(q.jsx)(Ve,{placeholder:"Pick a coin ticker...",onChangeValue:a,isDisabled:p,isLoading:p,options:s,name:"coinName",validators:[Vn]})}var Vn=function(e){return"string"===typeof e?void 0:"required"};function qn(e){var t=e.walletName,n=Yn(),a=Object(Se.h)((function(e){return e.coinName})),r=Object(o.a)(a,1)[0].split("+");return Object(q.jsx)(Se.a,{array:!0,name:"addresses",children:r.map((function(e,a){return Object(q.jsx)(Fe,{index:a,className:n.TextField,autoFocus:0===a,helperText:"Add a valid '".concat(e,"' Address - Wallet: '").concat(t,"'"),validators:[Hn],label:"Type your '".concat(e,"' Address..."),variant:"outlined"},e)}))})}var Hn=function(e){return"string"===typeof e&&e.trim().length>=5?void 0:"Address not valid"},Yn=Object(N.a)((function(){return{TextField:{marginTop:"4px",marginBottom:"32px"}}}));var Kn=["addresses"];function Xn(){var e=["Coin Ticker","Coin Address"],t=$n(),n=Object(m.f)(),a=Object(m.h)().walletName,r=Object(m.i)(),i=new URLSearchParams(Object(m.g)().search),s=Object(c.useState)(0),l=Object(o.a)(s,2),u=l[0],d=l[1],j=Object(c.useState)(null),p=Object(o.a)(j,2),b=p[0],f=p[1];we(b);var x=function(){var e=Object(I.a)(S.a.mark((function e(t){var r,o,c,i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.addresses,(o=Object(ke.a)(t,Kn)).address=r.join("."),"coins",e.prev=3,e.next=6,J("coins",{method:"POST",body:o});case 6:return c=e.sent,e.next=9,c.json();case 9:201===e.sent.statusCode&&n.push("/wallets/".concat(a)),e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(3),i="Coin named: '".concat(t.coinName,"' already exist!"),f(new Error(i)),e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),v=function(e){var t;null===e||void 0===e||null===(t=e.preventDefault)||void 0===t||t.call(e),d(u+1)},h=u===e.length-1?Object(q.jsx)(De,{startIcon:Object(q.jsx)(g.a,{}),type:"submit",variant:"contained",color:"primary",children:"Save"}):Object(q.jsx)(De,{variant:"contained",color:"primary",onClick:v,children:"Next"});return Object(q.jsxs)("div",{className:t.FormWrapper,children:[Object(q.jsx)(O.a,{size:"small",variant:"contained",startIcon:Object(q.jsx)(We.a,{}),className:t.backButton,disableElevation:!0,onClick:function(){var e=i.get("redirect");console.log("goBack",e);var t=r.params.rigId;e?n.push("/rigs/".concat(t).concat(e)):n.push("/rigs/".concat(t,"/wallets"))},children:"Back"}),Object(q.jsx)(Te.a,{className:t.Stepper,activeStep:u,alternativeLabel:!0,children:e.map((function(e){return Object(q.jsx)(Pe.a,{children:Object(q.jsx)(Re.a,{children:e})},e)}))}),Object(q.jsxs)(Se.b,{className:t.Form,onSubmit:x,children:[Object(q.jsx)(Se.c,{type:"hidden",value:a,name:"walletName"}),Object(q.jsxs)(Se.d,{children:[0===u&&Object(q.jsx)(Gn,{onChangeValue:v},u),1===u&&Object(q.jsx)(qn,{walletName:a},u)]}),Object(q.jsxs)("div",{className:t.Buttons,children:[Object(q.jsx)(O.a,{disabled:0===u,onClick:function(e){e.preventDefault(),d(u-1)},className:t.backButtonForm,children:"Back"}),h]})]})]})}var Jn,$n=Object(N.a)((function(e){return{FormWrapper:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative"},Form:{display:"flex",flexDirection:"column",marginTop:"32px",height:"33%",width:"100%",maxWidth:"50%",justifyContent:"space-around"},Stepper:{width:"100%",maxWidth:"45%"},backButton:{position:"absolute",zIndex:2,top:"16px",left:"16px"},backButtonForm:{marginRight:e.spacing(4)},Buttons:{display:"flex",justifyContent:"center"}}})),Zn=n(153),Qn=n.n(Zn),ea=n(154),ta=n.n(ea),na=function(e){var t,n=e.walletName,a=aa(),r=ve("workers?walletName=".concat(n)),o=r.loading,c=r.data,i=o||null===o,s=null===c||void 0===c||null===(t=c.results)||void 0===t?void 0:t.length;return Object(q.jsx)("div",{className:a.WorkerCounter,children:Object(q.jsx)(_.a,{variant:"caption",className:a.WorkerInfo,color:"textSecondary",gutterBottom:!0,children:Object(q.jsxs)("span",{children:["Used by"," ",i&&Object(q.jsx)(w.a,{size:14,classes:{root:a.CircularProgress}})," ",s&&s," Workers"]})})})},aa=Object(N.a)({WorkerCounter:{display:"flex",alignItems:"center"},WorkerInfo:{display:"flex",alignItems:"center",justifyContent:"center"}}),ra=function(e){var t,n=e.walletName,a=oa(),r=ee().apiServer,o=ve("".concat(r,"/api/v1/coins?walletName=").concat(n)),c=o.loading,i=o.data,s=c||null===c,l=null===i||void 0===i||null===(t=i.results)||void 0===t?void 0:t.length;return Object(q.jsxs)("div",{className:a.CoinCounter,children:[Object(q.jsxs)(_.a,{className:a.Typography,color:"textSecondary",variant:"overline",children:["Coins: ",l&&l," "]}),s&&Object(q.jsx)(w.a,{size:14,classes:{root:a.CircularProgress}})]})},oa=Object(N.a)({CoinCounter:{display:"flex",alignItems:"center",marginTop:"8px"},Typography:{fontSize:"0.85rem"}}),ca=le;function ia(e){var t=e.walletName,n=e.id,a=e.onRemoveWallet,r=la(),i=Object(c.useState)((function(){return!1})),s=Object(o.a)(i,2),l=s[0],u=s[1],d=Object(c.useState)((function(){return!1})),j=Object(o.a)(d,2),p=j[0],b=j[1],f=ee().bus,x=Object(m.f)(),v=Object(m.i)(),h=function(){return u((function(e){return!e}))},g=function(){var e=Object(I.a)(S.a.mark((function e(){var r,o,c,i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),h(),e.prev=2,r="wallets/".concat(n),o=$(J(r,{method:"DELETE"})),c="Deleting Wallet: ".concat(t,"..."),f.emit(ca,{promise:o,label:c}),e.next=9,o;case 9:i=e.sent,a({walletName:t,id:n}),console.log("onDelete walletName",i),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.error(e.t0);case 17:return e.prev=17,b(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})));return function(){return e.apply(this,arguments)}}();return Object(q.jsxs)("div",{className:r.CardWrapper,children:[Object(q.jsxs)(W.a,{className:r.root,variant:"outlined",children:[Object(q.jsxs)(P.a,{children:[Object(q.jsxs)("div",{className:r.WalletName,children:[Object(q.jsx)(z.a,{}),Object(q.jsx)(_.a,{variant:"h5",component:"h2",children:t})]}),Object(q.jsx)(na,{walletName:t}),Object(q.jsx)(ra,{walletName:t})]}),Object(q.jsxs)(T.a,{className:r.CardActions,children:[Object(q.jsx)(O.a,{disabled:p,className:r.buttons,"aria-label":"Add coins",size:"small",onClick:function(){var e=v.params.rigId;x.push("/rigs/".concat(e,"/wallets/").concat(t,"/add-coin"))},startIcon:Object(q.jsx)(Qn.a,{}),title:"Add coins to ".concat(t),children:"Add coins"}),Object(q.jsx)(O.a,{size:"small",disabled:p,className:r.buttons,"aria-label":"Delete",startIcon:Object(q.jsx)(ta.a,{}),title:"Delete ".concat(t," wallet"),onClick:h,children:"Delete"})]}),Object(q.jsx)("div",{className:r.buttonCover,onClick:function(){var e=v.params.rigId;x.push("/rigs/".concat(e,"/wallets/").concat(t))}})]}),l&&Object(q.jsx)(ie,{content:sa,onCancel:h,onConfirm:g})]})}var sa="Deleting a wallet will remove all the contained coins and as well as the 'idle' workers which are using it",la=Object(N.a)({root:{width:"100%",textAlign:"left",cursor:"pointer",position:"relative","&:hover, &:focus":{boxShadow:"0px 10px 13px -7px #e0e0e0"}},CardWrapper:(Jn={width:"33.33%",padding:"4px",position:"relative",zIndex:1},Object(v.a)(Jn,"@media (max-width:900px)",{width:"50%"}),Object(v.a)(Jn,"@media (max-width:624px)",{width:"100%"}),Jn),buttonCover:{width:"100%",position:"absolute",height:"100%",top:0,left:0,zIndex:1},WalletName:{display:"flex",alignItems:"center",marginBottom:"2px","& > h2":{marginLeft:"4px"}},CoinCounter:{display:"flex",alignItems:"center"},CircularProgress:{marginLeft:"8px"},buttons:{zIndex:2,position:"relative"},CardActions:{display:"flex",justifyContent:"space-between"}}),ua=Object(N.a)({NoWallets:{flexDirection:"column",alignItems:"center",display:"flex",justifyContent:"center",height:"100%",textAlign:"center"},button:{marginTop:"32px"},icon:{marginRight:"8px"},textSecondary:{marginTop:"24px"}});function da(e){var t=e.toggleAddWallet,n=ua();return Object(q.jsxs)("div",{className:n.NoWallets,children:[Object(q.jsxs)(_.a,{variant:"h4",children:[Object(q.jsx)(Rn.a,{className:n.icon}),"No Wallets!"]}),Object(q.jsx)(O.a,{variant:"contained",size:"large",color:"primary",className:n.button,startIcon:Object(q.jsx)(g.a,{}),onClick:t,children:"Add New wallet"}),Object(q.jsx)(_.a,{className:n.textSecondary,color:"textSecondary",children:"You do not have any wallet yet! Please add a wallet!"})]})}var ja=["walletName"];function pa(e){var t=e.match,n=ba(),a=Object(m.f)(),r=ve("wallets"),o=r.loading,c=r.data,i=r.error,s=r.updateData;if(o||null===o)return Object(q.jsx)("div",{className:n.loadingBar,children:Object(q.jsx)(w.a,{})});var l=function(){var e=t.params.rigId;a.push("/rigs/".concat(e,"/wallets/add-wallet"))},u=function(e,n){a.push("".concat(t.path,"/").concat(n))},d=function(e){var t=e.id;s((function(e){return Object(b.a)(Object(b.a)({},e),{},{results:e.results.filter((function(e){return e.id!==t}))})}))},j=(null===c||void 0===c?void 0:c.results)||[];return 404===(null===i||void 0===i?void 0:i.statusCode)||j.length<=0?Object(q.jsx)(da,{toggleAddWallet:l}):Object(q.jsxs)("div",{className:n.Wallets,children:[Object(q.jsx)("div",{className:n.NavBar,children:Object(q.jsx)(O.a,{variant:"contained",size:"small",color:"primary",className:n.button,startIcon:Object(q.jsx)(g.a,{}),onClick:l,children:"Add New Wallet"})}),Object(q.jsx)("div",{className:n.root,children:j.map((function(e){var t=e.walletName,n=Object(ke.a)(e,ja);return Object(q.jsx)(ia,Object(b.a)({onRemoveWallet:d,onClick:u,walletName:t},n),t)}))})]})}var ba=Object(N.a)((function(e){return{Wallets:{flex:1,flexDirection:"column",position:"relative",display:"flex",overflow:"hidden"},root:{backgroundColor:e.palette.background.paper,display:"flex",flexWrap:"wrap",padding:"6px",overflow:"auto","&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1"},"&::-webkit-scrollbar-thumb":{background:"#888"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},NavBar:{width:"100%",display:"flex",padding:"16px 8px"},loadingBar:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"}}}));function ma(e){var t=e.match;return console.log("Wallets",t),Object(q.jsxs)(m.c,{children:[Object(q.jsx)(m.a,{path:"".concat(t.path),component:pa,exact:!0}),Object(q.jsx)(m.a,{path:"".concat(t.path,"/add-wallet"),component:Ln,exact:!0}),Object(q.jsx)(m.a,{path:"".concat(t.path,"/:walletName"),component:Mn,exact:!0}),Object(q.jsx)(m.a,{path:"".concat(t.path,"/:walletName/add-coin"),component:Xn,exact:!0})]})}function fa(e){var t=e.logo,n=e.coin,a=e.onClick,r=e.coinPicked,o=xa();return Object(q.jsxs)("button",{"data-selected":r.name===n.name,onClick:function(){return null===a||void 0===a?void 0:a(n)},className:o.DonationBtn,children:[Object(q.jsx)("img",{className:o.img,src:t,alt:n.name}),Object(q.jsx)("span",{className:o.tickerName,children:n.name})]})}var xa=Object(N.a)((function(){return{DonationBtn:{minWidth:"123px",cursor:"pointer",padding:"8px 24px",margin:"2px",display:"flex",alignItems:"center",borderRadius:"4px",border:"1px solid rgba(25, 118, 210, 0.5)",color:"rgb(25, 118, 210)",outline:"none",background:"none","&:hover[data-selected='false']":{backgroundColor:"rgba(25, 118, 210, 0.04)",border:"1px solid rgb(25, 118, 210)"},"&[data-selected='true']":{backgroundColor:"rgba(25, 118, 210, 0.4)",border:"1px solid rgb(25, 118, 210)"}},tickerName:{marginLeft:"8px",fontWeight:"800"},img:{height:"32px",width:"auto"}}})),va=n(155),Oa=n.n(va);function ha(){var e=ga(),t=Object(c.useState)((function(){return null})),n=Object(o.a)(t,2),a=n[0],r=n[1],i=ve("donations"),s=i.data,l=i.loading;if(we(i.error),Object(c.useEffect)((function(){s&&(null===s||void 0===s?void 0:s.results)&&r(s.results[0])}),[s]),l||null===l||null===a)return Object(q.jsx)("div",{className:e.loadingBar,children:Object(q.jsx)(w.a,{})});var u=function(e){r(e)};return Object(q.jsxs)("div",{className:e.Donation,children:[Object(q.jsx)(_.a,{variant:"h3",component:"h1",color:"textSecondary",gutterBottom:!0,children:"Donation"}),Object(q.jsx)(_.a,{component:"p",paragraph:!0,children:"The software is free to download and use. There are no ads, popups, or links to products for sale. It is maintained by the creator (BeBo) with no funding or support from any sources. If you like the software, please, donation is appreciated and it helps to keep the software development active. Thanks."}),Object(q.jsx)("div",{className:e.ButtonCoins,children:s.results.map((function(e){return Object(q.jsx)(fa,{coinPicked:a,coin:e,onClick:u,logo:"/icons/".concat(e.name,".png")},e.name)}))}),Object(q.jsxs)("div",{className:e.address,children:[Object(q.jsx)(_.a,{className:e.coinPicked,component:"p",paragraph:!0,children:Object(q.jsxs)("span",{className:"text-ellipsis",children:[" ",a.value]})}),Object(q.jsx)(O.a,{title:"Copy ".concat(a.name," Address"),className:e.CopyButton,color:"primary",size:"small",variant:"contained",startIcon:Object(q.jsx)(Tn.a,{}),onClick:function(){return e=a.value,navigator.clipboard.writeText(e);var e},"aria-label":"Copy ".concat(a.name," Address"),children:"Copy Address"})]}),Object(q.jsx)("div",{className:e.QRCode,children:Object(q.jsx)(Oa.a,{value:a.value})})]})}var ga=Object(N.a)((function(){return{loadingBar:{width:"100%",display:"flex",height:"100%",justifyContent:"center",alignItems:"center"},address:Object(v.a)({display:"flex",alignItems:"center",padding:"8px",borderRadius:"4px",justifyContent:"space-between",backgroundColor:"rgba(0, 0, 0, 0.03)"},"@media (max-width:624px)",{flexDirection:"column"}),CopyButton:Object(v.a)({flexShrink:"0"},"@media (max-width:624px)",{marginTop:"16px",width:"100%"}),coinPicked:{fontSize:"15px",fontWeight:"bold",height:"100%",width:"100%",display:"flex",alignItems:"center",marginBottom:"0"},Donation:Object(v.a)({padding:"36px",height:"100%",width:"100%",margin:"auto",display:"flex",flexDirection:"column"},"@media (max-width:624px)",{padding:"24px 16px"}),ButtonCoins:Object(v.a)({marginBottom:"24px",display:"flex",flexWrap:"wrap"},"@media (max-width:624px)",{flexWrap:"initial",overflow:"auto",marginBottom:"18px",paddingBottom:"12px"}),QRCode:{padding:"32px 16px",display:"flex",marginTop:"24px",width:"100%",justifyContent:"center",borderRadius:"4px",backgroundColor:"rgba(0, 0, 0, 0.03)"}}})),Na=n(313),wa=n(317),ya=n(314),Ca=n(156),ka=n.n(Ca),Sa=Object(N.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},AppBar:{display:"flex",flexDirection:"row",justifyContent:"space-between"},actionbox:{display:"flex",flexDirection:"row"},redLine:{position:"absolute",width:"100%",height:"2px",top:"auto",bottom:"0",backgroundColor:"#f50057"}}}));function Ia(){var e=Sa(),t=Object(m.f)(),n=Object(m.g)(),a=Object(m.i)(),r=Object(c.useState)((function(){var e=Object.keys(Ta).find((function(e){return t.location.pathname.startsWith(e)}));return Ta[e]})),i=Object(o.a)(r,2),s=i[0],l=i[1],u=function(e,n){var r;l(n);var c=null===(r=Object.entries(Ta).find((function(e){return Object(o.a)(e,2)[1]===n})))||void 0===r?void 0:r[0],i=a.params.rigId;"undefined"!==typeof c&&t.push("/rigs/".concat(i).concat(c))};return Object(c.useEffect)((function(){if(null===n||void 0===n?void 0:n.pathname){var e,t,a,r=(null===(e=n.pathname)||void 0===e||null===(t=e.split)||void 0===t||null===(a=t.call(e,"/"))||void 0===a?void 0:a[3])||"-1",o=Ta["/".concat(r)];void 0!==o&&l(o)}}),[n]),Object(q.jsx)("div",{className:e.root,children:Object(q.jsxs)(Na.a,{className:e.AppBar,position:"static",children:[Object(q.jsxs)(wa.a,{value:s,onChange:u,"aria-label":"main tabs",children:[Object(q.jsx)(ya.a,Object(b.a)({label:"Workers"},Wa(2))),Object(q.jsx)(ya.a,Object(b.a)({label:"Miners"},Wa(0))),Object(q.jsx)(ya.a,Object(b.a)({label:"Wallets"},Wa(1)))]}),Object(q.jsx)("div",{className:e.actionbox,children:Object(q.jsxs)(O.a,{style:{position:"relative",borderRadius:"unset"},disableElevation:!0,variant:"contained",color:"primary",size:"medium",startIcon:Object(q.jsx)(ka.a,{}),onClick:function(){var e=a.params.rigId;t.push("/rigs/".concat(e,"/donation")),u(0,3)},children:["Donate",3===s&&Object(q.jsx)("span",{className:e.redLine})]})})]})})}function Wa(e){return{id:"main-tab-".concat(e),"aria-controls":"main-tabpanel-".concat(e)}}var Ta={"/workers":0,"/miners":1,"/wallets":2,"/donation":3};function Pa(e){var t=e.match,n=Ra();return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(Ia,{}),Object(q.jsx)("div",{className:n.RigControl,children:Object(q.jsxs)(m.c,{children:[Object(q.jsx)(m.a,{path:"".concat(t.path,"/workers"),component:pn}),Object(q.jsx)(m.a,{path:"".concat(t.path,"/miners"),component:Sn,exact:!0}),Object(q.jsx)(m.a,{path:"".concat(t.path,"/wallets"),component:ma}),Object(q.jsx)(m.a,{path:"".concat(t.path,"/donation"),component:ha,exact:!0})]})})]})}var Ra=Object(N.a)((function(){return{RigControl:{width:"100%",height:"100%",overflow:"auto",display:"flex",flexDirection:"column"}}})),Ea=n(157),Da=n.n(Ea),Ba="stun:stun.l.google.com:19302",Aa="stun:stun.l.google.com:19302",Ma={iceServers:[{urls:[Ba,Aa]}],iceCandidatePoolSize:"10"},_a="http://192.168.1.52:8000";function Fa(e,t){var n=e.roomId,a=e.bus;console.log(Ba,Aa,_a,"10");var r=Object(c.useRef)(null),o=Object(c.useRef)(null),i=Object(c.useRef)(null),s=we().addError,l=function(){o.current&&o.current.close(),r.current&&r.current.connected&&r.current.close()},u=function(e){try{var t="object"===typeof e?JSON.stringify(e):e;i.current.send(t)}catch(n){s(new Error("Connection Lost!"))}},d=function(){var e=Object(I.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.candidate,console.log("handleCandidates");try{n&&o.current.addIceCandidate(new RTCIceCandidate(n))}catch(a){console.log("Candidate Error",a)}case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(I.a)(S.a.mark((function e(c){var s,d,j,p;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=c.sender,d=c.offer,console.log({type:"createAnswer",sender:s}),o.current=new RTCPeerConnection(Ma,{}),j={reliable:!0},i.current=o.current.createDataChannel("commands",j),o.current.ondatachannel=function(e){e.channel.onmessage=function(e){try{var t=JSON.parse(e.data);if("string"===typeof t.namespace){var n=t.namespace,r=t.api,o=t.id;a.emit("".concat(n,"-").concat(o),r),console.log({type:"bus.emit",namespace:n,api:r,id:o})}}catch(c){console.log({type:"bus.emit.error",err:c})}console.log({type:"channel.onmessage",data:e.data})},e.channel.onopen=function(e){window._SOCKET={send:u},t(u),console.log({type:"channel.onopen",event:e})},e.channel.onerror=function(e){console.log({type:"channel.onerror",error:e})}},(b=o.current).oniceconnectionstatechange=function(e){var t=(null===e||void 0===e?void 0:e.target).iceConnectionState;switch(console.info({type:"oniceconnectionstatechange",iceConnectionState:t}),t){case"disconnected":case"failed":case"closed":l()}},b.onnegotiationneeded=function(e){console.info({type:"onnegotiationneeded",event:e})},b.onicecandidate=function(e){console.info({type:"onicecandidate",roomId:n}),e.candidate?r.current.emit("candidate",{candidate:e.candidate,roomId:n}):console.log("End collecting candidates")},e.prev=7,e.next=10,o.current.setRemoteDescription(new RTCSessionDescription(d));case 10:return e.next=12,o.current.createAnswer();case 12:return p=e.sent,e.next=15,o.current.setLocalDescription(p);case 15:r.current.emit("answer",{roomId:n,answer:p,to:s}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(7),console.log("answer Error",e.t0);case 21:case"end":return e.stop()}var b}),e,null,[[7,18]])})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){return function(){l()}}),[]),Object(c.useEffect)((function(){n&&""!==n.trim()&&(console.log({type:"connection",server:_a}),r.current=Da.a.connect(_a),r.current.on("connect",(function(){console.log({type:"connected",server:_a}),r.current.on("offer-received",j),r.current.on("candidate",d),r.current.on("join-room-error",(function(){console.log({type:"join-room-error",roomId:n}),l()})),r.current.emit("join-room",{roomId:n})})),r.current.on("disconnect",(function(){console.log({type:"disconnect"})})),r.current.on("connect_error",(function(){console.log({type:"connect_error"})})))}),[n])}var za=n(315),La=le;function Ua(e){var t=e.bus,n=Ga(),a=Object(c.useState)(!1),r=Object(o.a)(a,2),i=r[0],s=r[1],l=Object(c.useState)(null),u=Object(o.a)(l,2),d=u[0],j=u[1],p=we().setError;return Object(c.useEffect)((function(){var e=function(){return s(!1)},n=function(t){var n=t.promise,a=t.errorShow,r=void 0===a||a,o=t.label,c=void 0===o?"":o;c.trim().length>0&&j(c),s(!0),console.log("SHOWWWW"),n.catch((function(e){return r&&p(e)})).finally(e)};return t.on(La,n),function(){t.off(La,n)}}),[]),i&&Object(q.jsx)(bt,{selector:"#progress-bar",children:Object(q.jsxs)("div",{className:n.ProgressBar,children:[d&&Object(q.jsx)(_.a,{className:n.Typography,gutterBottom:!0,children:d}),Object(q.jsx)(za.a,{color:"secondary"})]})})}var Ga=Object(N.a)((function(){return{ProgressBar:{textAlign:"left",textIndent:"8px",width:"100%"},Typography:{fontWeight:"bold"}}})),Va=(n(142),Object(x.a)());function qa(){var e=Object(c.useState)((function(){return null})),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)((function(){return!0})),i=Object(o.a)(r,2),l=i[0],u=i[1],d=Object(c.useState)((function(){return{bus:Va}})),j=Object(o.a)(d,2),p=j[0],x=j[1];return Fa({roomId:n,bus:Va},(function(e){x((function(t){return Object(b.a)(Object(b.a)({},t),{},{socket:{send:e}})})),u(!1)})),Object(c.useEffect)((function(){var e=Object(m.e)(window.location.pathname,{path:"/rigs/:rigId",exact:!1,strict:!1}).params.rigId;e&&""!==e.trim()&&a(e)}),[]),Object(c.useEffect)((function(){console.log("APP RENDERING ",n,Date.now())})),l?Object(q.jsx)("div",{children:"Connecting...."}):Object(q.jsxs)(s.Provider,{value:p,children:[Object(q.jsx)(f.a,{children:Object(q.jsx)(m.c,{children:Object(q.jsx)(m.a,{path:"/rigs/:rigId",component:Pa})})}),Object(q.jsx)(Ua,{bus:Va})]})}window._BUS=Va;var Ha=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(q.jsx)(qa,{})}}]),n}(c.PureComponent),Ya=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.selector;return Object(q.jsx)(bt,{selector:n,children:t})}}]),n}(i.a.PureComponent);function Ka(){var e=Object(c.useState)((function(){return{list:[]}})),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(q.jsx)("div",{className:"App",children:Object(q.jsxs)(l.Provider,{value:a,children:[Object(q.jsx)(Ha,{}),Object(q.jsx)(Ya,{selector:"#notifications",children:n.list.map((function(e,t){var n="".concat(Date.now()).concat(t);return Object(q.jsx)(i.a.Fragment,{children:e},n)}))})]})})}var Xa=Object(c.memo)(Ka),Ja=document.getElementById("root");Object(a.render)(Object(q.jsx)(Xa,{}),Ja)}},[[242,1,2]]]);
//# sourceMappingURL=main.35c15e17.chunk.js.map